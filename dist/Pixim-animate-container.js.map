{"version":3,"file":"Pixim-animate-container.js","sources":["../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/MovieClip.ts","../src/Bitmap.ts","../src/Sprite.ts","../src/AnimateLoader.ts","../src/loadJS.ts","../src/AnimateManifest.ts","../src/core.ts","../src/Container.ts"],"sourcesContent":["/*!\n * @tawaship/pixi-animate-core - v3.1.1\n * \n * @require pixi.js v^5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport createjs from '@tawaship/createjs-module';\nexport { default as createjs } from '@tawaship/createjs-module';\nimport { utils, Container, filters, Sprite, BaseTexture, Texture, Graphics, LINE_CAP, LINE_JOIN, Text } from 'pixi.js';\nexport { Point as PixiPoint } from 'pixi.js';\n\nfunction createPixiData(pixi, regObj) {\r\n    return {\r\n        regObj,\r\n        instance: pixi\r\n    };\r\n}\r\nfunction createCreatejsParams() {\r\n    return {\r\n        x: 0,\r\n        y: 0,\r\n        scaleX: 0,\r\n        scaleY: 0,\r\n        regX: 0,\r\n        regY: 0,\r\n        skewX: 0,\r\n        skewY: 0,\r\n        rotation: 0,\r\n        visible: true,\r\n        alpha: 1,\r\n        _off: false,\r\n        mask: null,\r\n        filters: null\r\n    };\r\n}\r\nfunction updateDisplayObjectChildren(cjs, e) {\r\n    const list = cjs.children.slice();\r\n    for (let i = 0, l = list.length; i < l; i++) {\r\n        const child = list[i];\r\n        child.updateForPixi(e);\r\n    }\r\n    return true;\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nclass CreatejsStage extends createjs.Stage {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nclass CreatejsStageGL extends createjs.StageGL {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\nfunction createObject(proto) {\r\n    return Object.create(proto);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\n\n/**\r\n * @ignore\r\n */\r\nconst createjsInteractionEvents = {\r\n    mousedown: true,\r\n    pressmove: true,\r\n    pressup: true,\r\n    rollover: true,\r\n    rollout: true,\r\n    click: true\r\n};\r\nclass EventManager {\r\n    constructor(cjs) {\r\n        this._isDown = false;\r\n        this._cjs = cjs;\r\n        this._emitter = new utils.EventEmitter();\r\n        const pixi = cjs.pixi;\r\n        pixi\r\n            .on('pointerdown', this._onPointerDown, this)\r\n            .on('pointermove', this._onPointerMove, this)\r\n            .on('pointerup', this._onPointerUp, this)\r\n            .on('pointerupoutside', this._onPointerUpOutside, this)\r\n            .on('pointertap', this._onPointerTap, this)\r\n            .on('pointerover', this._onPointerOver, this)\r\n            .on('pointerout', this._onPointerOut, this);\r\n    }\r\n    _onPointerDown(e) {\r\n        e.currentTarget = e.currentTarget.createjs;\r\n        e.target = e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._isDown = true;\r\n        this._emitter.emit('mousedown', e);\r\n    }\r\n    _onPointerMove(e) {\r\n        if (!this._isDown) {\r\n            return;\r\n        }\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('pressmove', e);\r\n    }\r\n    _onPointerUp(e) {\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._isDown = false;\r\n        this._emitter.emit('pressup', e);\r\n    }\r\n    _onPointerUpOutside(e) {\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._isDown = false;\r\n        this._emitter.emit('pressup', e);\r\n    }\r\n    _onPointerTap(e) {\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('click', e);\r\n    }\r\n    _onPointerOver(e) {\r\n        e.currentTarget = e.currentTarget.createjs;\r\n        e.target = e.currentTarget.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('rollover', e);\r\n    }\r\n    _onPointerOut(e) {\r\n        e.currentTarget = e.currentTarget.createjs;\r\n        e.target = e.currentTarget.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('rollout', e);\r\n    }\r\n    add(type, cb) {\r\n        if (!(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.off(type, cb);\r\n        this._emitter.on(type, cb);\r\n        if (this._emitter.eventNames().length > 0) {\r\n            this._cjs.pixi.interactive = true;\r\n        }\r\n    }\r\n    remove(type, cb) {\r\n        if (!(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.off(type, cb);\r\n        if (this._emitter.eventNames().length === 0) {\r\n            this._cjs.pixi.interactive = false;\r\n        }\r\n    }\r\n    removeAll(type) {\r\n        if (type && !(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.removeAllListeners(type);\r\n        if (this._emitter.eventNames().length === 0) {\r\n            this._cjs.pixi.interactive = false;\r\n        }\r\n    }\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nclass CreatejsButtonHelper extends createjs.ButtonHelper {\r\n    constructor(...args) {\r\n        super(...args);\r\n        const createjs = args[0];\r\n        const pixi = createjs.pixi;\r\n        const baseFrame = args[1];\r\n        const overFrame = args[2];\r\n        const downFrame = args[3];\r\n        const hit = arguments[5];\r\n        const hitFrame = args[6];\r\n        hit.gotoAndStop(hitFrame);\r\n        const hitPixi = pixi.addChild(hit.pixi);\r\n        hitPixi.alpha = 0.00001;\r\n        let isOver = false;\r\n        let isDown = false;\r\n        hitPixi.on('pointerover', function () {\r\n            isOver = true;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(downFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerout', function () {\r\n            isOver = false;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerdown', function () {\r\n            isDown = true;\r\n            createjs.gotoAndStop(downFrame);\r\n        });\r\n        hitPixi.on('pointerup', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerupoutside', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.interactive = true;\r\n        hitPixi.cursor = 'pointer';\r\n    }\r\n}\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiMovieClip extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._filterContainer = null;\r\n        this._createjs = cjs;\r\n    }\r\n    get filterContainer() {\r\n        return this._filterContainer;\r\n    }\r\n    set filterContainer(value) {\r\n        this._filterContainer = value;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs) {\r\n    const pixi = new PixiMovieClip(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        subInstance: pixi\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.MovieClip;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nclass CreatejsMovieClip extends createjs.MovieClip {\r\n    constructor(...args) {\r\n        super();\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        this._updateState();\r\n        return updateDisplayObjectChildren(this, e);\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.add(type, cb);\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.remove(type, cb);\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    removeAllEventListeners(type, ...args) {\r\n        this._createjsEventManager.removeAll(type);\r\n        return super.removeAllEventListeners(type, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    get filters() {\r\n        return this._createjsParams.filters;\r\n    }\r\n    set filters(value) {\r\n        if (value) {\r\n            const list = [];\r\n            for (var i = 0; i < value.length; i++) {\r\n                const f = value[i];\r\n                if (f instanceof createjs.ColorMatrixFilter) {\r\n                    continue;\r\n                }\r\n                const m = new filters.ColorMatrixFilter();\r\n                m.matrix = [\r\n                    f.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n                    0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n                    0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n                    0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n                    0, 0, 0, 0, 1\r\n                ];\r\n                list.push(m);\r\n            }\r\n            var o = this._pixiData.instance;\r\n            var c = o.children;\r\n            var n = new Container();\r\n            var nc = this._pixiData.subInstance = n.addChild(new Container());\r\n            while (c.length) {\r\n                nc.addChild(c[0]);\r\n            }\r\n            o.addChild(n);\r\n            o.filterContainer = nc;\r\n            nc.updateTransform();\r\n            nc.calculateBounds();\r\n            const b = nc.getLocalBounds();\r\n            const x = b.x;\r\n            const y = b.y;\r\n            for (var i = 0; i < nc.children.length; i++) {\r\n                const child = nc.children[i];\r\n                child.x -= x;\r\n                child.y -= y;\r\n                if (child instanceof PixiMovieClip) {\r\n                    const fc = child.filterContainer;\r\n                    if (fc) {\r\n                        fc.cacheAsBitmap = false;\r\n                    }\r\n                }\r\n            }\r\n            n.x = x;\r\n            n.y = y;\r\n            nc.filters = list;\r\n            nc.cacheAsBitmap = true;\r\n        }\r\n        else {\r\n            const o = this._pixiData.instance;\r\n            if (o.filterContainer) {\r\n                const nc = this._pixiData.subInstance;\r\n                const n = nc.parent;\r\n                const c = nc.children;\r\n                o.removeChildren();\r\n                o.filterContainer = null;\r\n                while (c.length) {\r\n                    const v = o.addChild(c[0]);\r\n                    v.x += n.x;\r\n                    v.y += n.y;\r\n                }\r\n                nc.filters = [];\r\n                nc.cacheAsBitmap = false;\r\n                this._pixiData.subInstance = o;\r\n            }\r\n        }\r\n        this._createjsParams.filters = value;\r\n    }\r\n    addChild(child) {\r\n        this._pixiData.subInstance.addChild(child.pixi);\r\n        return super.addChild(child);\r\n    }\r\n    addChildAt(child, index) {\r\n        this._pixiData.subInstance.addChildAt(child.pixi, index);\r\n        return super.addChildAt(child, index);\r\n    }\r\n    removeChild(child) {\r\n        this._pixiData.subInstance.removeChild(child.pixi);\r\n        return super.removeChild(child);\r\n    }\r\n    removeChildAt(index) {\r\n        this._pixiData.subInstance.removeChildAt(index);\r\n        return super.removeChildAt(index);\r\n    }\r\n    removeAllChldren() {\r\n        this._pixiData.subInstance.removeChildren();\r\n        return super.removeAllChldren();\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsMovieClipParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiMovieClipData(createObject(CreatejsMovieClip.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiSprite extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs) {\r\n    const pixi = new PixiSprite(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$1 = createjs.Sprite;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nclass CreatejsSprite extends createjs.Sprite {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$1.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.add(type, cb);\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.remove(type, cb);\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    removeAllEventListeners(type, ...args) {\r\n        this._createjsEventManager.removeAll(type);\r\n        return super.removeAllEventListeners(type, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    gotoAndStop(...args) {\r\n        super.gotoAndStop(...args);\r\n        const frame = this.spriteSheet.getFrame(this.currentFrame);\r\n        const baseTexture = BaseTexture.from(frame.image);\r\n        const texture = new Texture(baseTexture, frame.rect);\r\n        this._pixiData.instance.texture = texture;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsSpriteParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiSpriteData(createObject(CreatejsSprite.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiShape extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        graphics\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs) {\r\n    const pixi = new PixiShape(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        masked: []\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$2 = createjs.Shape;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nclass CreatejsShape extends createjs.Shape {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$2.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.add(type, cb);\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.remove(type, cb);\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    removeAllEventListeners(type, ...args) {\r\n        this._createjsEventManager.removeAll(type);\r\n        return super.removeAllEventListeners(type, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    get graphics() {\r\n        return this._createjsParams.graphics;\r\n    }\r\n    set graphics(value) {\r\n        if (this._pixiData.masked.length) {\r\n            this._pixiData.instance.removeChildren();\r\n            if (value) {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = this._pixiData.instance;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = null;\r\n                }\r\n            }\r\n        }\r\n        if (value) {\r\n            this._pixiData.instance.addChild(value.pixi);\r\n        }\r\n        this._createjsParams.graphics = value;\r\n    }\r\n    get masked() {\r\n        return this._pixiData.masked;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsShapeParams(null),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiShapeData(createObject(CreatejsShape.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiBitmap extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs) {\r\n    const pixi = new PixiBitmap(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$3 = createjs.Bitmap;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nclass CreatejsBitmap extends createjs.Bitmap {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$3.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        const res = super.initialize(...args);\r\n        const texture = Texture.from(this.image);\r\n        this._pixiData.instance.texture = texture;\r\n        return res;\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.add(type, cb);\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.remove(type, cb);\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    removeAllEventListeners(type, ...args) {\r\n        this._createjsEventManager.removeAll(type);\r\n        return super.removeAllEventListeners(type, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsBitmapParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiBitmapData(createObject(CreatejsBitmap.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nclass PixiGraphics extends Graphics {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs) {\r\n    const pixi = new PixiGraphics(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        strokeFill: 0,\r\n        strokeAlpha: 1\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n    0: LINE_CAP.BUTT,\r\n    1: LINE_CAP.ROUND,\r\n    2: LINE_CAP.SQUARE\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n    0: LINE_JOIN.MITER,\r\n    1: LINE_JOIN.ROUND,\r\n    2: LINE_JOIN.BEVEL\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst P$4 = createjs.Graphics;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nclass CreatejsGraphics extends createjs.Graphics {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$4.apply(this, args);\r\n        this._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n        this._pixiData.strokeFill = 0;\r\n        this._pixiData.strokeAlpha = 1;\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.add(type, cb);\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.remove(type, cb);\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    removeAllEventListeners(type, ...args) {\r\n        this._createjsEventManager.removeAll(type);\r\n        return super.removeAllEventListeners(type, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    // path methods\r\n    moveTo(x, y) {\r\n        if (this._pixiData.instance.clone().endFill().containsPoint({ x: x, y: y })) {\r\n            this._pixiData.instance.beginHole();\r\n        }\r\n        else {\r\n            this._pixiData.instance.endHole();\r\n        }\r\n        this._pixiData.instance.moveTo(x, y);\r\n        return super.moveTo(x, y);\r\n    }\r\n    mt(x, y) {\r\n        return this.moveTo(x, y);\r\n    }\r\n    lineTo(x, y) {\r\n        this._pixiData.instance.lineTo(x, y);\r\n        return super.lineTo(x, y);\r\n    }\r\n    lt(x, y) {\r\n        return this.lineTo(x, y);\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n        return super.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    at(x1, y1, x2, y2, radius) {\r\n        return this.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        this._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n        return super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    a(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        return this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    quadraticCurveTo(cpx, cpy, x, y) {\r\n        this._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n        return super.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    qt(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    curveTo(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        this._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n        return super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    bt(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        return this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    rect(x, y, w, h) {\r\n        this._pixiData.instance.drawRect(x, y, w, h);\r\n        return super.rect(x, y, w, h);\r\n    }\r\n    r(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    drawRect(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    dr(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    closePath() {\r\n        this._pixiData.instance.closePath();\r\n        return super.closePath();\r\n    }\r\n    cp() {\r\n        return this.closePath();\r\n    }\r\n    clear() {\r\n        this._pixiData.instance.clear();\r\n        return super.clear();\r\n    }\r\n    c() {\r\n        return this.clear();\r\n    }\r\n    _parseColor(color) {\r\n        const res = {\r\n            color: 0,\r\n            alpha: 1\r\n        };\r\n        if (!color) {\r\n            res.alpha = 0;\r\n            return res;\r\n        }\r\n        if (color.charAt(0) === '#') {\r\n            res.color = parseInt(color.slice(1), 16);\r\n            return res;\r\n        }\r\n        const colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n        res.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n        res.alpha = Number(colors[3]);\r\n        return res;\r\n    }\r\n    beginFill(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.instance.beginFill(c.color, c.alpha);\r\n        return super.beginFill(color);\r\n    }\r\n    f(color) {\r\n        return this.beginFill(color);\r\n    }\r\n    endFill() {\r\n        this._pixiData.instance.endFill();\r\n        return super.endFill();\r\n    }\r\n    ef() {\r\n        return this.endFill();\r\n    }\r\n    setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        this._pixiData.instance.lineTextureStyle({\r\n            width: thickness,\r\n            color: this._pixiData.strokeFill,\r\n            alpha: this._pixiData.strokeAlpha,\r\n            cap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n            join: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n            miterLimit\r\n        });\r\n        return super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    ss(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        return this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    beginStroke(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.strokeFill = c.color;\r\n        this._pixiData.strokeAlpha = c.alpha;\r\n        return super.beginStroke(color);\r\n    }\r\n    s(color) {\r\n        return this.beginStroke(color);\r\n    }\r\n    drawRoundRect(x, y, w, h, radius) {\r\n        this._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n        return super.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    rr(x, y, w, h, radius) {\r\n        return this.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pixiData.instance.drawCircle(x, y, radius);\r\n        return super.drawCircle(x, y, radius);\r\n    }\r\n    dc(x, y, radius) {\r\n        return this.drawCircle(x, y, radius);\r\n    }\r\n    drawEllipse(x, y, w, h) {\r\n        this._pixiData.instance.drawEllipse(x, y, w, h);\r\n        return super.drawEllipse(x, y, w, h);\r\n    }\r\n    de(x, y, w, h) {\r\n        return this.drawEllipse(x, y, w, h);\r\n    }\r\n    drawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n        this._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n        return super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n    dp(x, y, radius, sides, pointSize, angle) {\r\n        return this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsGraphicsParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiGraphicsData(createObject(CreatejsGraphics.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nclass PixiText extends Text {\r\n}\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiTextContainer extends Container {\r\n    constructor(cjs, text) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this._text = text;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN = 'left';\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text, font, color) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        text: text,\r\n        font: font,\r\n        color: color,\r\n        textAlign: DEF_ALIGN,\r\n        lineHeight: 0,\r\n        lineWidth: 0\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs, text) {\r\n    const pixi = new PixiTextContainer(cjs, text);\r\n    return createPixiData(pixi, pixi.pivot);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$5 = createjs.Text;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nclass CreatejsText extends createjs.Text {\r\n    constructor(text, font, color = '#000000', ...args) {\r\n        super(text, font, color, ...args);\r\n        this._createjsParams = createCreatejsTextParams(text, font, color);\r\n        const _font = this._parseFont(font);\r\n        const t = new PixiText(text, {\r\n            fontWeight: _font.fontWeight,\r\n            fontSize: _font.fontSize,\r\n            fontFamily: _font.fontFamily,\r\n            fill: this._parseColor(color),\r\n            wordWrap: true\r\n        });\r\n        this._pixiData = createPixiTextData(this, t);\r\n        this._pixiData.instance.addChild(t);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$5.call(this, text, font, color, ...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.add(type, cb);\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            this._createjsEventManager.remove(type, cb);\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    removeAllEventListeners(type, ...args) {\r\n        this._createjsEventManager.removeAll(type);\r\n        return super.removeAllEventListeners(type, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    get text() {\r\n        return this._createjsParams.text;\r\n    }\r\n    set text(text) {\r\n        this._pixiData.instance.text.text = text;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.text = text;\r\n    }\r\n    _parseFont(font) {\r\n        const p = font.split(' ');\r\n        let w = 'normal';\r\n        let s = p.shift() || '';\r\n        if (s.indexOf('px') === -1) {\r\n            w = s;\r\n            s = p.shift() || '';\r\n        }\r\n        return {\r\n            fontWeight: w,\r\n            fontSize: Number((s || '0px').replace('px', '')),\r\n            fontFamily: p.join(' ').replace(/'/g, '') //'\r\n        };\r\n    }\r\n    get font() {\r\n        return this._createjsParams.font;\r\n    }\r\n    set font(font) {\r\n        const _font = this._parseFont(font);\r\n        this._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n        this._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n        this._createjsParams.font = font;\r\n    }\r\n    _parseColor(color) {\r\n        return parseInt(color.slice(1), 16);\r\n    }\r\n    get color() {\r\n        return this._createjsParams.color;\r\n    }\r\n    set color(color) {\r\n        this._pixiData.instance.text.style.fill = this._parseColor(color);\r\n        this._createjsParams.color = color;\r\n    }\r\n    _align(align) {\r\n        if (align === 'left') {\r\n            this._pixiData.instance.text.x = 0;\r\n            return;\r\n        }\r\n        if (align === 'center') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n            return;\r\n        }\r\n        if (align === 'right') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width;\r\n            return;\r\n        }\r\n    }\r\n    get textAlign() {\r\n        return this._createjsParams.textAlign;\r\n    }\r\n    set textAlign(align) {\r\n        this._pixiData.instance.text.style.align = align;\r\n        this._align(align);\r\n        this._createjsParams.textAlign = align;\r\n    }\r\n    get lineHeight() {\r\n        return this._createjsParams.lineHeight;\r\n    }\r\n    set lineHeight(height) {\r\n        this._pixiData.instance.text.style.lineHeight = height;\r\n        this._createjsParams.lineHeight = height;\r\n    }\r\n    get lineWidth() {\r\n        return this._createjsParams.lineWidth;\r\n    }\r\n    set lineWidth(width) {\r\n        this._pixiData.instance.text.style.wordWrapWidth = width;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.lineWidth = width;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsTextParams('', '', ''),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiTextData(createObject(CreatejsText.prototype), new PixiText('')),\r\n        writable: true\r\n    }\r\n});\n\nfunction resolvePath(path, basepath) {\r\n    return utils.url.resolve(basepath, path);\r\n}\r\n/**\r\n * Load assets of createjs content published with Adobe Animate.\r\n *\r\n * @param comp Composition obtained from `AdobeAn.getComposition`.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction loadAssetAsync(comp, basepath, options = {}) {\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        if (basepath) {\r\n            basepath = basepath.replace(/([^\\/])$/, \"$1/\");\r\n        }\r\n        const loader = new createjs.LoadQueue(false);\r\n        loader.installPlugin(createjs.Sound);\r\n        const errors = [];\r\n        loader.addEventListener('fileload', (evt) => {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', (evt) => {\r\n            if (errors.length) {\r\n                reject(errors);\r\n                return;\r\n            }\r\n            resolve(evt);\r\n        });\r\n        loader.addEventListener('error', (evt) => {\r\n            errors.push(evt.data);\r\n        });\r\n        const manifests = [];\r\n        const origin = lib.properties.manifest;\r\n        for (let i = 0; i < origin.length; i++) {\r\n            const o = origin[i];\r\n            const m = {\r\n                src: resolvePath(o.src, basepath),\r\n                id: o.id\r\n            };\r\n            for (let i in o) {\r\n                if (!m[i]) {\r\n                    m[i] = o[i];\r\n                }\r\n            }\r\n            if (options.crossOrigin) {\r\n                m.crossOrigin = true;\r\n            }\r\n            if (o.src.indexOf('data:') === 0) {\r\n                m.type = 'image';\r\n            }\r\n            manifests.push(m);\r\n        }\r\n        loader.loadManifest(manifests);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\n// overrides\r\ncreatejs.Stage = CreatejsStage;\r\ncreatejs.StageGL = CreatejsStageGL;\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Sprite = CreatejsSprite;\r\ncreatejs.Shape = CreatejsShape;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Graphics = CreatejsGraphics;\r\ncreatejs.Text = CreatejsText;\r\ncreatejs.ButtonHelper = CreatejsButtonHelper;\r\n// install plugins\r\ncreatejs.MotionGuidePlugin.install();\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { CreatejsBitmap, CreatejsButtonHelper, CreatejsGraphics, CreatejsMovieClip, CreatejsShape, CreatejsSprite, CreatejsStage, CreatejsStageGL, CreatejsText, PixiBitmap, PixiGraphics, PixiMovieClip, PixiShape, PixiSprite, PixiText, PixiTextContainer, createCreatejsParams, createPixiData, loadAssetAsync, resolvePath, updateDisplayObjectChildren };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import { createjs, CreatejsMovieClip as _CreatejsMovieClip, ITickerData, TCreatejsObject } from '@tawaship/pixi-animate-core';\r\n\r\nexport { ITickerData } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P: number = 1000 / 60;\r\n\r\nexport class AnimateEvent extends createjs.Event {\r\n\tconstructor(type: string) {\r\n\t\tsuper(type);\r\n\t}\r\n};\r\n\r\nexport interface IReachLabelData {\r\n\t/**\r\n\t * Label name.\r\n\t */\r\n\tlabel: string;\r\n\t\r\n\t/**\r\n\t * Frame number of label.\r\n\t */\r\n\tposition: number;\r\n}\r\n\r\nexport class ReachLabelEvent extends AnimateEvent {\r\n\tdata: IReachLabelData;\r\n\t\r\n\tconstructor(type: string, label: IReachLabelData) {\r\n\t\tsuper(type);\r\n\t\t\r\n\t\tthis.data = label;\r\n\t}\r\n}\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjsmovieclip.html | CreatejsMovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends _CreatejsMovieClip {\r\n\tdeclare _framerateBase: number;\r\n\t\r\n\t/**\r\n\t * When the last frame of the timeline is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\tendAnimation?(e: AnimateEvent): void {}\r\n\t\r\n\t/**\r\n\t * When either labels is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\treachLabel?(e: ReachLabelEvent): void {}\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tsuper.initialize(...args);\r\n\t\t\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @override\r\n\t */\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\tconst currentFrame = this.currentFrame;\r\n\t\t\r\n\t\t// this.advance(e.delta * P);\r\n\t\tthis.advance(P);\r\n\t\t\r\n\t\tif (currentFrame !== this.currentFrame) {\r\n\t\t\tif (this.currentFrame === (this.totalFrames - 1)) {\r\n\t\t\t\tthis.dispatchEvent(new AnimateEvent('endAnimation'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < this.labels.length; i++) {\r\n\t\t\t\tconst label = this.labels[i];\r\n\t\t\t\tif (this.currentFrame === label.position) {\r\n\t\t\t\t\tthis.dispatchEvent(new ReachLabelEvent('reachLabel', label));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.updateForPixi(e);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Replace child instance\r\n\t * \r\n\t * @param name Name of old instancee.\r\n\t * @param cls Class of new instance.\r\n\t */\r\n\treplaceInstance(name: string, cls: typeof CreatejsMovieClip) {\r\n\t\tconst old = this[name];\r\n\t\t\r\n\t\tif (!old) {\r\n\t\t\tconsole.warn(`instance '${name}' was not found.`);\r\n\t\t}\r\n\t\t\r\n\t\tconst props = ['x', 'y', 'scaleX', 'scaleY', 'rotation', 'skewX', 'skewY', 'regX', 'regY', '_off', 'alpha'];\r\n\t\t\r\n\t\tconst instance = this[name] = new cls(old.mode, old.startPosition, old.loop, old.timeline.reversed);\r\n\t\t\r\n\t\tconst tweens = this.timeline.tweens;\r\n\t\tfor (let i = 0; i < tweens.length; i++) {\r\n\t\t\tconst target = tweens[i].target;\r\n\t\t\t\r\n\t\t\tif (Array.isArray(target.state)) {\r\n\t\t\t\tfor (let j = 0; j < target.state.length; j++) {\r\n\t\t\t\t\tif (target.state[j].t === old) {\r\n\t\t\t\t\t\ttarget.state[j].t = instance;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (target === old) {\r\n\t\t\t\ttweens[i].target = instance;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < props.length; i++) {\r\n\t\t\tinstance[props[i]] = old[props[i]];\r\n\t\t}\r\n\t\t\r\n\t\tif (old.mask) {\r\n\t\t\tinstance.mask = old.mask;\r\n\t\t\told.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (old.filters) {\r\n\t\t\tinstance.filters = old.filters;\r\n\t\t\told.filters = null;\r\n\t\t\t\r\n\t\t\tconst nominalBounds = instance.nominalBounds;\r\n\t\t\tinstance.cache(nominalBounds.x - 2, nominalBounds.y - 2, nominalBounds.width + 4, nominalBounds.height + 4);\r\n\t\t}\r\n\t\t\r\n\t\tthis.removeChild(old);\r\n\t\t\r\n\t\treturn instance;\r\n\t}\r\n}\r\n\r\ndelete(CreatejsMovieClip.prototype.endAnimation);\r\ndelete(CreatejsMovieClip.prototype.reachLabel);","import { Texture } from 'pixi.js';\r\nimport { CreatejsBitmap as _CreatejsBitmap } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjsbitmap.html | CreatejsBitmap]]\r\n */\r\nexport class CreatejsBitmap extends _CreatejsBitmap {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import { Texture } from 'pixi.js';\r\nimport { CreatejsSprite as _CreatejsSprite } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjssprite.html | CreatejsSprite]]\r\n */\r\nexport class CreatejsSprite extends _CreatejsSprite {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import * as PIXI from 'pixi.js';\r\nimport * as Pixim from '@tawaship/pixim.js';\r\nimport { loadAssetAsync, ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-core';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\nimport loadJS from './loadJS';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const AdobeAn: any;\r\n\r\nexport type TAnimateLoaderRawResource = IAnimateLibrary;\r\n\r\nexport class AnimateLoaderResource extends Pixim.LoaderResource<TAnimateLoaderRawResource> {\r\n\tdestroy() {\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport interface IAnimateLoaderTarget {\r\n\t/**\r\n\t * \"lib.properties.id\" in Animate content.\r\n\t */\r\n\tid: string;\r\n\t\r\n\t/**\r\n\t * Directory path of Animate content.\r\n\t */\r\n\tbasepath: string;\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/interfaces/iloadassetoption.html | PixiAnimateCore.ILoadAssetOption]]\r\n\t */\r\n\toptions?: ILoadAssetOption;\r\n\t\r\n\t/**\r\n\t * Javascript file path of Animate content.\r\n\t */\r\n\tfilepath?: string;\r\n};\r\n\r\nexport type TAnimateLoaderTarget = IAnimateLoaderTarget;\r\n\r\nexport interface IAnimateLoaderTargetDictionary extends Pixim.ILoaderTargetDictionary<TAnimateLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateLoaderResourceDictionary extends Pixim.ILoaderResourceDictionary<TAnimateLoaderRawResource> {\r\n\r\n}\r\n\r\nexport interface IAnimateLoaderOption extends Pixim.ILoaderOption {\r\n\t\r\n}\r\n\r\nexport class AnimateLoader extends Pixim.LoaderBase<TAnimateLoaderTarget, TAnimateLoaderRawResource> {\r\n\tloadAsync(target: TAnimateLoaderTarget, options: IAnimateLoaderOption = {}) {\r\n\t\treturn this._loadAsync(target, options);\r\n\t}\r\n\t\r\n\tloadAllAsync(targets: IAnimateLoaderTargetDictionary, options: IAnimateLoaderOption = {}) {\r\n\t\tconst res: Pixim.ILoaderResourceDictionary<TAnimateLoaderRawResource>  = {};\r\n\t\t\r\n\t\tif (Object.keys(targets).length === 0) {\r\n\t\t\treturn Promise.resolve(res);\r\n\t\t}\r\n\t\t\r\n\t\tconst promises = [];\r\n\t\t\r\n\t\tfor (let i in targets) {\r\n\t\t\tpromises.push(\r\n\t\t\t\tthis.loadAsync(targets[i], options)\r\n\t\t\t\t\t.then(resource => {\r\n\t\t\t\t\t\tres[i] = resource;\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\treturn Promise.all(promises)\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tprivate _loadAsync(target: TAnimateLoaderTarget, options: IAnimateLoaderOption = {}) {\r\n\t\tconst basepath = this._resolveBasepath(options.basepath);\r\n\t\tconst version = this._resolveVersion(options.version);\r\n\t\t\r\n\t\tconst p = !target.filepath\r\n\t\t\t? Promise.resolve()\r\n\t\t\t: (() => {\r\n\t\t\t\tconst filepath = Pixim.utils.resolvePath(target.filepath, target.basepath);\r\n\t\t\t\tconst url = this._resolveUrl(filepath, options);\r\n\t\t\t\t\r\n\t\t\t\treturn loadJS(url)\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tthrow `Animate: '${filepath}' cannot load.`;\r\n\t\t\t\t\t});\r\n\t\t\t})();\r\n\t\t\r\n\t\treturn p.then(() => {\r\n\t\t\tconst comp = AdobeAn.getComposition(target.id);\r\n\t\t\tif (!comp) {\r\n\t\t\t\tthrow new Error(`no composition: ${target.id}`);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst lib: IAnimateLibrary = comp.getLibrary();\r\n\t\t\tconst origin = lib.properties.manifest;\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < origin.length; i++) {\r\n\t\t\t\tconst o = origin[i];\r\n\t\t\t\tconst filepath = Pixim.utils.resolvePath(o.src, target.basepath);\r\n\t\t\t\to.src = this._resolveUrl(filepath, options);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn loadAssetAsync(comp, '', target.options);\r\n\t\t})\r\n\t\t.then(lib => {\r\n\t\t\tfor (let i  in lib) {\r\n\t\t\t\tif (lib[i].prototype instanceof CreatejsMovieClip) {\r\n\t\t\t\t\tlib[i].prototype._framerateBase = lib.properties.fps;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn new AnimateLoaderResource(lib, null);\r\n\t\t})\r\n\t\t.catch((e: any) => {\r\n\t\t\treturn new AnimateLoaderResource({}, e);\r\n\t\t});\r\n\t}\r\n}","export default function loadJS(src: string): Promise<void> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst script = document.createElement('script');\r\n\t\tscript.src = src;\r\n\t\tscript.addEventListener('load', () => {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\tresolve();\r\n\t\t});\r\n\t\tscript.addEventListener('error', (e: any) => {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\treject(e);\r\n\t\t});\r\n\t\tdocument.body.appendChild(script);\r\n\t});\r\n}","import * as Pixim from '@tawaship/pixim.js';\r\nimport * as AnimateLoader from './AnimateLoader';\r\n\r\nexport interface IAnimateManifestTargetDictionary extends Pixim.IManifestTargetDictionary<AnimateLoader.TAnimateLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateDictionary extends Pixim.IRawResourceDictionary<AnimateLoader.TAnimateLoaderRawResource> {\r\n\r\n}\r\n\r\nexport class AnimateManifest extends Pixim.ManifestBase<AnimateLoader.TAnimateLoaderTarget, AnimateLoader.TAnimateLoaderRawResource> {\r\n\tprotected _loadAsync(targets: IAnimateManifestTargetDictionary, options: AnimateLoader.IAnimateLoaderOption = {}) {\r\n\t\tconst loader = new AnimateLoader.AnimateLoader(options);\r\n\t\t\r\n\t\treturn loader.loadAllAsync(targets);\r\n\t}\r\n}","import { Content as PiximContent } from '@tawaship/pixim.js';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\nimport { CreatejsBitmap } from './Bitmap';\r\nimport { CreatejsSprite } from './Sprite';\r\nimport { AnimateManifest, IAnimateManifestTargetDictionary } from './AnimateManifest';\r\nimport { createjs } from '@tawaship/pixi-animate-core';\r\nexport { createjs, ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-core';\r\n\r\nPiximContent.registerManifest('animates', AnimateManifest);\r\n\r\n/**\r\n * Define animate assets for class.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] class.\r\n */\r\nexport function defineAnimatesTo(Content: typeof PiximContent, data: IAnimateManifestTargetDictionary) {\r\n\tContent.defineTargets('animates', data, {});\r\n}\r\n\r\n/**\r\n * Define animate assets for instance.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] instance.\r\n */\r\nexport function addAnimatesTo(content: PiximContent, data: IAnimateManifestTargetDictionary) {\r\n\tcontent.addTargets('animates', data, {});\r\n}\r\n\r\n// overrides\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Sprite = CreatejsSprite;","import { Container as _Container, Task, ITickerData } from '@tawaship/pixim.js';\r\nimport { TCreatejsObject } from '@tawaship/pixi-animate-core';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\n\r\nexport interface ICreatejsMovieClipDictionary {\r\n\t[id: number]: CreatejsMovieClip;\r\n}\r\n\r\nexport interface ICreatejsData {\r\n\tid: number;\r\n\ttargets: ICreatejsMovieClipDictionary;\r\n\ttask: Task;\r\n}\r\n\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nexport class Container extends _Container {\r\n\tprivate _createjsData: ICreatejsData;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._createjsData = {\r\n\t\t\tid: 0,\r\n\t\t\ttargets: {},\r\n\t\t\ttask: new Task([], this)\r\n\t\t};\r\n\t\t\r\n\t\tconst targets = this._createjsData.targets;\r\n\t\t\r\n\t\tthis._createjsData.task.add((e: ITickerData) => {\r\n\t\t\tfor (let i in targets) {\r\n\t\t\t\ttargets[i].updateForPixi(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._createjsData.task.first();\r\n\t}\r\n\t\r\n\t/**\r\n\t * @override\r\n\t */\r\n\tupdateTask(e: ITickerData) {\r\n\t\tsuper.updateTask(e);\r\n\t\t\r\n\t\tconst task = this._createjsData.task;\r\n\t\t\r\n\t\tif (!this.taskEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\ttask.done(e);\r\n\t}\r\n\t\r\n\tprivate _addCreatejs(cjs: TCreatejsObject) {\r\n\t\tif (cjs instanceof CreatejsMovieClip) {\r\n\t\t\tconst p = cjs.pixi.parent;\r\n\t\t\t\r\n\t\t\tcjs.pixi.once('added', () => {\r\n\t\t\t\tif (cjs.pixi.parent !== p) {\r\n\t\t\t\t\tcjs.gotoAndPlay(0);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst id = this._createjsData.id++;\r\n\t\t\t\tthis._createjsData.targets[id] = cjs;\r\n\t\t\t\t\r\n\t\t\t\tcjs.pixi.once('removed', () => {\r\n\t\t\t\t\tdelete(this._createjsData.targets[id]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejsAt(cjs: TCreatejsObject, index: number) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChildAt(cjs.pixi, index);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\tremoveCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis.removeChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n}"],"names":["createPixiData","pixi","regObj","instance","updateDisplayObjectChildren","cjs","e","const","list","children","slice","i","l","length","updateForPixi","CreatejsStage","props","this","tickOnUpdate","tick","dispatchEvent","Stage","CreatejsStageGL","createjs","StageGL","createObject","proto","Object","create","DEG_TO_RAD","Math","PI","createjsInteractionEvents","mousedown","pressmove","pressup","rollover","rollout","click","EventManager","_isDown","_cjs","_emitter","utils","EventEmitter","on","_onPointerDown","_onPointerMove","_onPointerUp","_onPointerUpOutside","_onPointerTap","_onPointerOver","_onPointerOut","currentTarget","target","ev","data","rawX","global","x","rawY","y","emit","add","type","cb","off","eventNames","interactive","remove","removeAll","removeAllListeners","CreatejsButtonHelper","super","args","baseFrame","overFrame","downFrame","hit","arguments","hitFrame","gotoAndStop","hitPixi","addChild","alpha","let","isOver","isDown","cursor","ButtonHelper","PixiMovieClip","_filterContainer","_createjs","prototypeAccessors","filterContainer","value","Container","createPixiMovieClipData","assign","pivot","subInstance","P","MovieClip","CreatejsMovieClip","_pixiData","_createjsParams","scaleX","scaleY","regX","regY","skewX","skewY","rotation","visible","_off","mask","filters","_createjsEventManager","apply","initialize","prototypeAccessors$1","_updateState","scale","skew","renderable","addEventListener","removeEventListener","removeAllEventListeners","masked","push","once","parent","f","ColorMatrixFilter","m","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","nc","updateTransform","calculateBounds","b","getLocalBounds","child","fc","cacheAsBitmap","removeChildren","v","addChildAt","index","removeChild","removeChildAt","removeAllChldren","defineProperties","prototype","writable","PixiSprite","prototypeAccessors$2","Sprite","createPixiSpriteData","anchor","P$1","CreatejsSprite","prototypeAccessors$3","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","PixiShape","prototypeAccessors$4","createCreatejsShapeParams","graphics","createPixiShapeData","P$2","Shape","CreatejsShape","prototypeAccessors$5","PixiBitmap","prototypeAccessors$6","createPixiBitmapData","P$3","Bitmap","CreatejsBitmap","res","prototypeAccessors$7","PixiGraphics","prototypeAccessors$8","Graphics","createPixiGraphicsData","strokeFill","strokeAlpha","LineCap","LINE_CAP","BUTT","ROUND","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","P$4","CreatejsGraphics","beginFill","prototypeAccessors$9","moveTo","clone","endFill","containsPoint","beginHole","endHole","mt","lineTo","lt","arcTo","x1","y1","x2","y2","radius","at","arc","startAngle","endAngle","anticlockwise","a","quadraticCurveTo","cpx","cpy","qt","curveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","bt","w","h","drawRect","r","dr","closePath","cp","clear","_parseColor","color","charAt","parseInt","colors","replace","split","Number","ef","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","ss","beginStroke","s","drawRoundRect","drawRoundedRect","rr","drawCircle","dc","drawEllipse","de","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","dp","PixiText","Text","PixiTextContainer","text","_text","prototypeAccessors$10","createCreatejsTextParams","font","textAlign","lineHeight","lineWidth","createPixiTextData","P$5","CreatejsText","_font","_parseFont","t","fontWeight","fontSize","fontFamily","fill","wordWrap","call","prototypeAccessors$11","_align","p","shift","indexOf","style","align","height","wordWrapWidth","resolvePath","path","basepath","url","resolve","MotionGuidePlugin","install","AnimateEvent","Event","ReachLabelEvent","label","framerate","_framerateBase","endAnimation","reachLabel","advance","totalFrames","labels","position","replaceInstance","name","cls","old","console","warn","mode","startPosition","loop","timeline","reversed","tweens","Array","isArray","state","j","nominalBounds","cache","_CreatejsMovieClip","replaceTexture","_CreatejsBitmap","_CreatejsSprite","AnimateLoaderResource","destroy","Pixim.LoaderResource","AnimateLoader","loadAsync","options","_loadAsync","loadAllAsync","targets","keys","Promise","promises","then","resource","all","src","filepath","_resolveBasepath","_resolveVersion","version","Pixim.utils","_resolveUrl","reject","script","document","createElement","body","appendChild","catch","comp","AdobeAn","getComposition","id","Error","origin","getLibrary","properties","manifest","lib","loader","LoadQueue","installPlugin","Sound","errors","evt","images","getImages","item","result","handleFileLoad","manifests","crossOrigin","loadManifest","getSpriteSheet","queue","ssMetadata","SpriteSheet","getResult","frames","loadAssetAsync","fps","Pixim.LoaderBase","AnimateManifest","AnimateLoader.AnimateLoader","Pixim.ManifestBase","registerManifest","_createjsData","task","Task","first","updateTask","taskEnabled","done","_addCreatejs","gotoAndPlay","addCreatejs","addCreatejsAt","removeCreatejs","_Container","content","addTargets","Content","defineTargets"],"mappings":"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"}