{"version":3,"file":"Pixim-animate-container.js","sources":["../node_modules/@tawaship/pixi-animate-container/dist/pixi-animate-container.esm.js","../src/createjs/modules/MovieClip.ts","../src/createjs/modules/Sprite.ts","../src/createjs/modules/Bitmap.ts","../src/AnimateBlobLoader.ts","../src/AnimateLoader.ts","../src/AnimateManifest.ts","../src/core.ts","../src/Container.ts","../src/index.ts"],"sourcesContent":["/*!\n * pixi-animate-container - v2.0.0\n * \n * @require pixi.js v^5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport createjs from '@tawaship/createjs-module';\nimport { utils, Container as Container$1, Sprite, BaseTexture, Texture, Graphics, LINE_CAP, LINE_JOIN, Text, filters } from 'pixi.js';\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nclass CreatejsButtonHelper extends createjs.ButtonHelper {\r\n    constructor(...args) {\r\n        super(...args);\r\n        const createjs = args[0];\r\n        const pixi = createjs.pixi;\r\n        const baseFrame = args[1];\r\n        const overFrame = args[2];\r\n        const downFrame = args[3];\r\n        const hit = arguments[5];\r\n        const hitFrame = args[6];\r\n        hit.gotoAndStop(hitFrame);\r\n        const hitPixi = pixi.addChild(hit.pixi);\r\n        hitPixi.alpha = 0.00001;\r\n        let isOver = false;\r\n        let isDown = false;\r\n        hitPixi.on('pointerover', function () {\r\n            isOver = true;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(downFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerout', function () {\r\n            isOver = false;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerdown', function () {\r\n            isDown = true;\r\n            createjs.gotoAndStop(downFrame);\r\n        });\r\n        hitPixi.on('pointerup', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerupoutside', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.interactive = true;\r\n        hitPixi.cursor = 'pointer';\r\n    }\r\n}\n\nfunction createObject(proto) {\r\n    return Object.create(proto);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\n\nfunction createPixiData(pixi, regObj) {\r\n    return {\r\n        regObj,\r\n        instance: pixi\r\n    };\r\n}\r\nfunction createCreatejsParams() {\r\n    return {\r\n        x: 0,\r\n        y: 0,\r\n        scaleX: 0,\r\n        scaleY: 0,\r\n        regX: 0,\r\n        regY: 0,\r\n        skewX: 0,\r\n        skewY: 0,\r\n        rotation: 0,\r\n        visible: true,\r\n        alpha: 1,\r\n        _off: false,\r\n        mask: null\r\n    };\r\n}\r\nfunction updateDisplayObjectChildren(cjs, e) {\r\n    const list = cjs.children.slice();\r\n    for (let i = 0, l = list.length; i < l; i++) {\r\n        const child = list[i];\r\n        child.updateForPixi(e);\r\n    }\r\n    return true;\r\n}\r\nfunction mixinCreatejsDisplayObject(superClass) {\r\n    class C extends superClass {\r\n        get pixi() {\r\n            return this._pixiData.instance;\r\n        }\r\n        get x() {\r\n            return this._createjsParams.x;\r\n        }\r\n        set x(value) {\r\n            this._pixiData.instance.x = value;\r\n            this._createjsParams.x = value;\r\n        }\r\n        get y() {\r\n            return this._createjsParams.y;\r\n        }\r\n        set y(value) {\r\n            this._pixiData.instance.y = value;\r\n            this._createjsParams.y = value;\r\n        }\r\n        get scaleX() {\r\n            return this._createjsParams.scaleX;\r\n        }\r\n        set scaleX(value) {\r\n            this._pixiData.instance.scale.x = value;\r\n            this._createjsParams.scaleX = value;\r\n        }\r\n        get scaleY() {\r\n            return this._createjsParams.scaleY;\r\n        }\r\n        set scaleY(value) {\r\n            this._pixiData.instance.scale.y = value;\r\n            this._createjsParams.scaleY = value;\r\n        }\r\n        get skewX() {\r\n            return this._createjsParams.skewX;\r\n        }\r\n        set skewX(value) {\r\n            this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n            this._createjsParams.skewX = value;\r\n        }\r\n        get skewY() {\r\n            return this._createjsParams.skewY;\r\n        }\r\n        set skewY(value) {\r\n            this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n            this._createjsParams.skewY = value;\r\n        }\r\n        get regX() {\r\n            return this._createjsParams.regX;\r\n        }\r\n        set regX(value) {\r\n            this._pixiData.regObj.x = value;\r\n            this._createjsParams.regX = value;\r\n        }\r\n        get regY() {\r\n            return this._createjsParams.regY;\r\n        }\r\n        set regY(value) {\r\n            this._pixiData.regObj.y = value;\r\n            this._createjsParams.regY = value;\r\n        }\r\n        get rotation() {\r\n            return this._createjsParams.rotation;\r\n        }\r\n        set rotation(value) {\r\n            this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n            this._createjsParams.rotation = value;\r\n        }\r\n        get visible() {\r\n            return this._createjsParams.visible;\r\n        }\r\n        set visible(value) {\r\n            value = !!value;\r\n            this._pixiData.instance.visible = value;\r\n            this._createjsParams.visible = value;\r\n        }\r\n        get alpha() {\r\n            return this._createjsParams.alpha;\r\n        }\r\n        set alpha(value) {\r\n            this._pixiData.instance.alpha = value;\r\n            this._createjsParams.alpha = value;\r\n        }\r\n        get _off() {\r\n            return this._createjsParams._off;\r\n        }\r\n        set _off(value) {\r\n            this._pixiData.instance.renderable = !value;\r\n            this._createjsParams._off = value;\r\n        }\r\n        addEventListener(type, cb, ...args) {\r\n            const p = super.addEventListener(type, cb, ...args);\r\n            if (!(cb instanceof CreatejsButtonHelper)) {\r\n                this._createjsEventManager.add(type, cb);\r\n            }\r\n            return p;\r\n        }\r\n        removeEventListener(type, cb, ...args) {\r\n            const p = super.removeEventListener(type, cb, ...args);\r\n            if (!(cb instanceof CreatejsButtonHelper)) {\r\n                this._createjsEventManager.remove(type, cb);\r\n            }\r\n            return p;\r\n        }\r\n        removeAllEventListeners(type, ...args) {\r\n            const p = super.removeAllEventListeners(type, ...args);\r\n            this._createjsEventManager.removeAll(type);\r\n            return p;\r\n        }\r\n        get mask() {\r\n            return this._createjsParams.mask;\r\n        }\r\n        set mask(value) {\r\n            if (value) {\r\n                value.masked.push(this._pixiData.instance);\r\n                this._pixiData.instance.mask = value.pixi;\r\n                this._pixiData.instance.once('added', () => {\r\n                    this._pixiData.instance.parent.addChild(value.pixi);\r\n                });\r\n            }\r\n            else {\r\n                this._pixiData.instance.mask = null;\r\n            }\r\n            this._createjsParams.mask = value;\r\n        }\r\n    }\r\n    return C;\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nclass CreatejsStage extends createjs.Stage {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nclass CreatejsStageGL extends createjs.StageGL {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\nvar createjsInteractionEvents;\r\n(function (createjsInteractionEvents) {\r\n    createjsInteractionEvents[\"mousedown\"] = \"mousedown\";\r\n    createjsInteractionEvents[\"pressmove\"] = \"pressmove\";\r\n    createjsInteractionEvents[\"pressup\"] = \"pressup\";\r\n    createjsInteractionEvents[\"rollover\"] = \"rollover\";\r\n    createjsInteractionEvents[\"rollout\"] = \"rollout\";\r\n    createjsInteractionEvents[\"click\"] = \"click\";\r\n})(createjsInteractionEvents || (createjsInteractionEvents = {}));\r\nclass EventManager {\r\n    constructor(cjs) {\r\n        this._downTarget = null;\r\n        this._cjs = cjs;\r\n        this._emitter = new utils.EventEmitter();\r\n        const pixi = cjs.pixi;\r\n        pixi\r\n            .on('pointerdown', this._onPointerDown, this)\r\n            .on('pointermove', this._onPointerMove, this)\r\n            .on('pointerup', this._onPointerUp, this)\r\n            .on('pointerupoutside', this._onPointerUpOutside, this)\r\n            .on('pointertap', this._onPointerTap, this)\r\n            .on('pointerover', this._onPointerOver, this)\r\n            .on('pointerout', this._onPointerOut, this);\r\n    }\r\n    _onPointerDown(e) {\r\n        const ev = {\r\n            type: createjsInteractionEvents.mousedown,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: e.target.createjs,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._downTarget = e.target.createjs;\r\n        this._emitter.emit('mousedown', ev);\r\n    }\r\n    _onPointerMove(e) {\r\n        if (!this._downTarget) {\r\n            return;\r\n        }\r\n        const ev = {\r\n            type: createjsInteractionEvents.pressmove,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: this._downTarget,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._emitter.emit('pressmove', ev);\r\n    }\r\n    _onPointerUp(e) {\r\n        const ev = {\r\n            type: createjsInteractionEvents.pressup,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: this._downTarget,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._downTarget = null;\r\n        this._emitter.emit('pressup', ev);\r\n    }\r\n    _onPointerUpOutside(e) {\r\n        const ev = {\r\n            type: createjsInteractionEvents.pressup,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: this._downTarget,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._downTarget = null;\r\n        this._emitter.emit('pressup', ev);\r\n    }\r\n    _onPointerTap(e) {\r\n        const ev = {\r\n            type: createjsInteractionEvents.click,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: e.target.createjs,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._emitter.emit('click', ev);\r\n    }\r\n    _onPointerOver(e) {\r\n        const ev = {\r\n            type: createjsInteractionEvents.rollover,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: e.currentTarget.createjs,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._emitter.emit('rollover', ev);\r\n    }\r\n    _onPointerOut(e) {\r\n        const ev = {\r\n            type: createjsInteractionEvents.rollout,\r\n            currentTarget: e.currentTarget.createjs,\r\n            target: e.currentTarget.createjs,\r\n            rawX: e.data.global.x,\r\n            rawY: e.data.global.y,\r\n        };\r\n        this._emitter.emit('rollout', ev);\r\n    }\r\n    add(type, cb) {\r\n        if (!(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.on(type, cb);\r\n        if (this._emitter.eventNames().length > 0) {\r\n            this._cjs.pixi.interactive = true;\r\n        }\r\n    }\r\n    remove(type, cb) {\r\n        if (!(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.off(type, cb);\r\n        if (this._emitter.eventNames().length === 0) {\r\n            this._cjs.pixi.interactive = false;\r\n        }\r\n    }\r\n    removeAll(type) {\r\n        if (type && !(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.removeAllListeners(type);\r\n        if (this._emitter.eventNames().length === 0) {\r\n            this._cjs.pixi.interactive = false;\r\n        }\r\n    }\r\n}\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiMovieClip extends Container$1 {\r\n    constructor(cjs) {\r\n        super();\r\n        this._filterContainer = null;\r\n        this._createjs = cjs;\r\n    }\r\n    get filterContainer() {\r\n        return this._filterContainer;\r\n    }\r\n    set filterContainer(value) {\r\n        this._filterContainer = value;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams() {\r\n    return Object.assign(createCreatejsParams(), {\r\n        filters: null\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs) {\r\n    const pixi = new PixiMovieClip(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        subInstance: pixi\r\n    });\r\n}\r\nclass AnimateEvent extends createjs.Event {\r\n    constructor(type) {\r\n        super(type);\r\n    }\r\n}\r\nclass ReachLabelEvent extends AnimateEvent {\r\n    constructor(type, label) {\r\n        super(type);\r\n        this.data = label;\r\n    }\r\n}\r\nconst P = createjs.MovieClip;\r\nconst T = 1000 / 60;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nclass CreatejsMovieClip extends mixinCreatejsDisplayObject(createjs.MovieClip) {\r\n    constructor(...args) {\r\n        super();\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P.apply(this, args);\r\n        this.framerate = this._framerateBase;\r\n    }\r\n    /**\r\n     * When the last frame of the timeline is reached.\r\n     *\r\n     * @event\r\n     */\r\n    endAnimation(e) { }\r\n    /**\r\n     * When either labels is reached.\r\n     *\r\n     * @event\r\n     */\r\n    reachLabel(e) { }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        super.initialize(...args);\r\n        this.framerate = this._framerateBase;\r\n    }\r\n    updateForPixi(e) {\r\n        const currentFrame = this.currentFrame;\r\n        this.advance(T * e.delta);\r\n        if (this._useFrameEvent && currentFrame !== this.currentFrame) {\r\n            if (this._useFrameEvent.endAnimation && this.currentFrame === (this.totalFrames - 1)) {\r\n                this.dispatchEvent(new AnimateEvent('endAnimation'));\r\n            }\r\n            if (this._useFrameEvent.reachLabel) {\r\n                for (let i = 0; i < this.labels.length; i++) {\r\n                    const label = this.labels[i];\r\n                    if (this.currentFrame === label.position) {\r\n                        this.dispatchEvent(new ReachLabelEvent('reachLabel', label));\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._updateState();\r\n        return updateDisplayObjectChildren(this, e);\r\n    }\r\n    get filters() {\r\n        return this._createjsParams.filters;\r\n    }\r\n    //*\r\n    set filters(value) {\r\n        const list = [];\r\n        if (value && value.length > 0) {\r\n            for (var i = 0; i < value.length; i++) {\r\n                let f = value[i];\r\n                if (!(f instanceof createjs.ColorFilter)) {\r\n                    continue;\r\n                }\r\n                list.push(f.pixi);\r\n            }\r\n        }\r\n        this._pixiData.instance.filters = list;\r\n        this._createjsParams.filters = value;\r\n    }\r\n    //*/\r\n    /*\r\n    set filters(value: TCreatejsColorFilters) {\r\n        if (value) {\r\n            const list = [];\r\n            \r\n            for (var i = 0; i < value.length; i++) {\r\n                const f = value[i];\r\n                \r\n                if (f instanceof createjs.ColorMatrixFilter) {\r\n                    continue;\r\n                }\r\n                \r\n                const m = new filters.ColorMatrixFilter();\r\n                m.matrix = [\r\n                    f.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n                    0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n                    0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n                    0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n                    0, 0, 0, 0, 1\r\n                ];\r\n                list.push(m);\r\n            }\r\n\r\n            for (var i = 0; i < value.length; i++) {\r\n                let f = value[i];\r\n                \r\n                if (!(f instanceof createjs.ColorFilter)) {\r\n                    continue;\r\n                }\r\n                \r\n                list.push(f.pixi);\r\n            }\r\n\r\n            var o = this._pixiData.instance;\r\n            var c = o.children;\r\n            var n = new Container();\r\n            var nc = this._pixiData.subInstance = n.addChild(new Container());\r\n            \r\n            while (c.length) {\r\n                nc.addChild(c[0]);\r\n            }\r\n            \r\n            o.addChild(n);\r\n            o.filterContainer = nc;\r\n            \r\n            nc.updateTransform();\r\n            nc.calculateBounds();\r\n            \r\n            const b = nc.getLocalBounds();\r\n            const x = b.x;\r\n            const y = b.y;\r\n            \r\n            for (var i = 0; i < nc.children.length; i++) {\r\n                const child = nc.children[i];\r\n                \r\n                child.x -= x;\r\n                child.y -= y;\r\n                \r\n                if (child instanceof PixiMovieClip) {\r\n                    const fc = child.filterContainer;\r\n                    if (fc) {\r\n                        //fc.cacheAsBitmap = false;\r\n                    }\r\n                }\r\n            }\r\n            n.x = x;\r\n            n.y = y;\r\n            \r\n            nc.filters = list;\r\n            //nc.cacheAsBitmap = true;\r\n        } else {\r\n            const o = this._pixiData.instance;\r\n            \r\n            if (o.filterContainer) {\r\n                const nc = this._pixiData.subInstance;\r\n                const n = nc.parent;\r\n                const c = nc.children;\r\n                \r\n                o.removeChildren();\r\n                o.filterContainer = null;\r\n                while (c.length) {\r\n                    const v = o.addChild(c[0]);\r\n                    v.x += n.x;\r\n                    v.y += n.y;\r\n                }\r\n                \r\n                nc.filters = [];\r\n                //nc.cacheAsBitmap = false;\r\n                \r\n                this._pixiData.subInstance = o;\r\n            }\r\n        }\r\n        \r\n        this._createjsParams.filters = value;\r\n    }\r\n    //*/\r\n    addChild(child) {\r\n        this._pixiData.subInstance.addChild(child.pixi);\r\n        return super.addChild(child);\r\n    }\r\n    addChildAt(child, index) {\r\n        this._pixiData.subInstance.addChildAt(child.pixi, index);\r\n        return super.addChildAt(child, index);\r\n    }\r\n    removeChild(child) {\r\n        this._pixiData.subInstance.removeChild(child.pixi);\r\n        return super.removeChild(child);\r\n    }\r\n    removeChildAt(index) {\r\n        this._pixiData.subInstance.removeChildAt(index);\r\n        return super.removeChildAt(index);\r\n    }\r\n    removeAllChldren() {\r\n        this._pixiData.subInstance.removeChildren();\r\n        return super.removeAllChldren();\r\n    }\r\n}\r\ndelete (CreatejsMovieClip.prototype.endAnimation);\r\ndelete (CreatejsMovieClip.prototype.reachLabel);\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsMovieClipParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiMovieClipData(createObject(CreatejsMovieClip.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiSprite extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this.interactive = true;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs) {\r\n    const pixi = new PixiSprite(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$1 = createjs.Sprite;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nclass CreatejsSprite extends mixinCreatejsDisplayObject(createjs.Sprite) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$1.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    gotoAndStop(...args) {\r\n        super.gotoAndStop(...args);\r\n        const frame = this.spriteSheet.getFrame(this.currentFrame);\r\n        const baseTexture = BaseTexture.from(frame.image);\r\n        const texture = new Texture(baseTexture, frame.rect);\r\n        this._pixiData.instance.texture = texture;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsSpriteParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiSpriteData(createObject(CreatejsSprite.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiShape extends Container$1 {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this.interactive = true;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        graphics\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs) {\r\n    const pixi = new PixiShape(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        masked: []\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$2 = createjs.Shape;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nclass CreatejsShape extends mixinCreatejsDisplayObject(createjs.Shape) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$2.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get graphics() {\r\n        return this._createjsParams.graphics;\r\n    }\r\n    set graphics(value) {\r\n        if (this._pixiData.masked.length) {\r\n            this._pixiData.instance.removeChildren();\r\n            if (value) {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = this._pixiData.instance;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = null;\r\n                }\r\n            }\r\n        }\r\n        if (value) {\r\n            this._pixiData.instance.addChild(value.pixi);\r\n        }\r\n        this._createjsParams.graphics = value;\r\n    }\r\n    get masked() {\r\n        return this._pixiData.masked;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsShapeParams(null),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiShapeData(createObject(CreatejsShape.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiBitmap extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this.interactive = true;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs) {\r\n    const pixi = new PixiBitmap(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$3 = createjs.Bitmap;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nclass CreatejsBitmap extends mixinCreatejsDisplayObject(createjs.Bitmap) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$3.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        const res = super.initialize(...args);\r\n        const texture = Texture.from(this.image);\r\n        this._pixiData.instance.texture = texture;\r\n        return res;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsBitmapParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiBitmapData(createObject(CreatejsBitmap.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nclass PixiGraphics extends Graphics {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs) {\r\n    const pixi = new PixiGraphics(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        strokeFill: 0,\r\n        strokeAlpha: 1\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n    0: LINE_CAP.BUTT,\r\n    1: LINE_CAP.ROUND,\r\n    2: LINE_CAP.SQUARE\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n    0: LINE_JOIN.MITER,\r\n    1: LINE_JOIN.ROUND,\r\n    2: LINE_JOIN.BEVEL\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst P$4 = createjs.Graphics;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nclass CreatejsGraphics extends mixinCreatejsDisplayObject(createjs.Graphics) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$4.apply(this, args);\r\n        this._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n        this._pixiData.strokeFill = 0;\r\n        this._pixiData.strokeAlpha = 1;\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    // path methods\r\n    moveTo(x, y) {\r\n        if (this._pixiData.instance.clone().endFill().containsPoint({ x: x, y: y })) {\r\n            this._pixiData.instance.beginHole();\r\n        }\r\n        else {\r\n            this._pixiData.instance.endHole();\r\n        }\r\n        this._pixiData.instance.moveTo(x, y);\r\n        return super.moveTo(x, y);\r\n    }\r\n    mt(x, y) {\r\n        return this.moveTo(x, y);\r\n    }\r\n    lineTo(x, y) {\r\n        this._pixiData.instance.lineTo(x, y);\r\n        return super.lineTo(x, y);\r\n    }\r\n    lt(x, y) {\r\n        return this.lineTo(x, y);\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n        return super.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    at(x1, y1, x2, y2, radius) {\r\n        return this.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        this._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n        return super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    a(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        return this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    quadraticCurveTo(cpx, cpy, x, y) {\r\n        this._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n        return super.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    qt(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    curveTo(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        this._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n        return super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    bt(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        return this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    rect(x, y, w, h) {\r\n        this._pixiData.instance.drawRect(x, y, w, h);\r\n        return super.rect(x, y, w, h);\r\n    }\r\n    r(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    drawRect(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    dr(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    closePath() {\r\n        this._pixiData.instance.closePath();\r\n        return super.closePath();\r\n    }\r\n    cp() {\r\n        return this.closePath();\r\n    }\r\n    clear() {\r\n        this._pixiData.instance.clear();\r\n        return super.clear();\r\n    }\r\n    c() {\r\n        return this.clear();\r\n    }\r\n    _parseColor(color) {\r\n        const res = {\r\n            color: 0,\r\n            alpha: 1\r\n        };\r\n        if (!color) {\r\n            res.alpha = 0;\r\n            return res;\r\n        }\r\n        if (color.charAt(0) === '#') {\r\n            res.color = parseInt(color.slice(1), 16);\r\n            return res;\r\n        }\r\n        const colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n        res.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n        res.alpha = Number(colors[3]);\r\n        return res;\r\n    }\r\n    beginFill(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.instance.beginFill(c.color, c.alpha);\r\n        return super.beginFill(color);\r\n    }\r\n    f(color) {\r\n        return this.beginFill(color);\r\n    }\r\n    endFill() {\r\n        this._pixiData.instance.endFill();\r\n        return super.endFill();\r\n    }\r\n    ef() {\r\n        return this.endFill();\r\n    }\r\n    setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        this._pixiData.instance.lineTextureStyle({\r\n            width: thickness,\r\n            color: this._pixiData.strokeFill,\r\n            alpha: this._pixiData.strokeAlpha,\r\n            cap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n            join: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n            miterLimit\r\n        });\r\n        return super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    ss(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        return this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    beginStroke(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.strokeFill = c.color;\r\n        this._pixiData.strokeAlpha = c.alpha;\r\n        return super.beginStroke(color);\r\n    }\r\n    s(color) {\r\n        return this.beginStroke(color);\r\n    }\r\n    drawRoundRect(x, y, w, h, radius) {\r\n        this._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n        return super.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    rr(x, y, w, h, radius) {\r\n        return this.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pixiData.instance.drawCircle(x, y, radius);\r\n        return super.drawCircle(x, y, radius);\r\n    }\r\n    dc(x, y, radius) {\r\n        return this.drawCircle(x, y, radius);\r\n    }\r\n    drawEllipse(x, y, w, h) {\r\n        this._pixiData.instance.drawEllipse(x, y, w, h);\r\n        return super.drawEllipse(x, y, w, h);\r\n    }\r\n    de(x, y, w, h) {\r\n        return this.drawEllipse(x, y, w, h);\r\n    }\r\n    drawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n        this._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n        return super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n    dp(x, y, radius, sides, pointSize, angle) {\r\n        return this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsGraphicsParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiGraphicsData(createObject(CreatejsGraphics.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nclass PixiText extends Text {\r\n}\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiTextContainer extends Container$1 {\r\n    constructor(cjs, text) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this._text = text;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN = 'left';\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text, font, color) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        text: text,\r\n        font: font,\r\n        color: color,\r\n        textAlign: DEF_ALIGN,\r\n        lineHeight: 0,\r\n        lineWidth: 0\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs, text) {\r\n    const pixi = new PixiTextContainer(cjs, text);\r\n    return createPixiData(pixi, pixi.pivot);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$5 = createjs.Text;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nclass CreatejsText extends mixinCreatejsDisplayObject(createjs.Text) {\r\n    constructor(text, font, color = '#000000', ...args) {\r\n        super(text, font, color, ...args);\r\n        this._createjsParams = createCreatejsTextParams(text, font, color);\r\n        const _font = this._parseFont(font);\r\n        const t = new PixiText(text, {\r\n            fontWeight: _font.fontWeight,\r\n            fontSize: _font.fontSize,\r\n            fontFamily: _font.fontFamily,\r\n            fill: this._parseColor(color),\r\n            wordWrap: true\r\n        });\r\n        this._pixiData = createPixiTextData(this, t);\r\n        this._pixiData.instance.addChild(t);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$5.call(this, text, font, color, ...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get text() {\r\n        return this._createjsParams.text;\r\n    }\r\n    set text(text) {\r\n        this._pixiData.instance.text.text = text;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.text = text;\r\n    }\r\n    _parseFont(font) {\r\n        const p = font.split(' ');\r\n        let w = 'normal';\r\n        let s = p.shift() || '';\r\n        if (s.indexOf('px') === -1) {\r\n            w = s;\r\n            s = p.shift() || '';\r\n        }\r\n        return {\r\n            fontWeight: w,\r\n            fontSize: Number((s || '0px').replace('px', '')),\r\n            fontFamily: p.join(' ').replace(/'/g, '') //'\r\n        };\r\n    }\r\n    get font() {\r\n        return this._createjsParams.font;\r\n    }\r\n    set font(font) {\r\n        const _font = this._parseFont(font);\r\n        this._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n        this._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n        this._createjsParams.font = font;\r\n    }\r\n    _parseColor(color) {\r\n        return parseInt(color.slice(1), 16);\r\n    }\r\n    get color() {\r\n        return this._createjsParams.color;\r\n    }\r\n    set color(color) {\r\n        this._pixiData.instance.text.style.fill = this._parseColor(color);\r\n        this._createjsParams.color = color;\r\n    }\r\n    _align(align) {\r\n        if (align === 'left') {\r\n            this._pixiData.instance.text.x = 0;\r\n            return;\r\n        }\r\n        if (align === 'center') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n            return;\r\n        }\r\n        if (align === 'right') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width;\r\n            return;\r\n        }\r\n    }\r\n    get textAlign() {\r\n        return this._createjsParams.textAlign;\r\n    }\r\n    set textAlign(align) {\r\n        this._pixiData.instance.text.style.align = align;\r\n        this._align(align);\r\n        this._createjsParams.textAlign = align;\r\n    }\r\n    get lineHeight() {\r\n        return this._createjsParams.lineHeight;\r\n    }\r\n    set lineHeight(height) {\r\n        this._pixiData.instance.text.style.lineHeight = height;\r\n        this._createjsParams.lineHeight = height;\r\n    }\r\n    get lineWidth() {\r\n        return this._createjsParams.lineWidth;\r\n    }\r\n    set lineWidth(width) {\r\n        this._pixiData.instance.text.style.wordWrapWidth = width;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.lineWidth = width;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsTextParams('', '', ''),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiTextData(createObject(CreatejsText.prototype), new PixiText('')),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.ColorMatrixFilter.html | PIXI.Sprite]]\r\n */\r\nclass PixiColorMatrixFilter extends filters.ColorMatrixFilter {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiColorMatrixFilterData(cjs) {\r\n    const pixi = new PixiColorMatrixFilter(cjs);\r\n    return { instance: pixi };\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsColorFilterParams() {\r\n    return Object.assign(createCreatejsParams(), {\r\n        redMultiplier: 1,\r\n        greenMultiplier: 1,\r\n        blueMultiplier: 1,\r\n        alphaMultiplier: 1,\r\n        redOffset: 0,\r\n        greenOffset: 0,\r\n        blueOffset: 0,\r\n        alphaOffset: 0\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$6 = createjs.ColorFilter;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ColorFilter.html | createjs.ColorFilter]]\r\n */\r\nclass CreatejsColorFilter extends createjs.ColorFilter {\r\n    constructor(...args) {\r\n        super(args);\r\n        const pixiData = this._pixiData = createPixiColorMatrixFilterData(this);\r\n        const createjsParams = this._createjsParams = createCreatejsColorFilterParams();\r\n        // ColorFilterのtweenは、列挙可能かつ hasOwnPropery なプロパティにアクセスしてしまうので、enumerableを切っておく\r\n        Object.defineProperties(this, {\r\n            _pixiData: {\r\n                enumerable: false,\r\n                value: pixiData\r\n            },\r\n            _createjsParams: {\r\n                enumerable: false,\r\n                value: createjsParams\r\n            },\r\n            redMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.redMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[0] = value, this._createjsParams.redMultiplier = value;\r\n                }\r\n            },\r\n            greenMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.greenMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[6] = value, this._createjsParams.greenMultiplier = value;\r\n                }\r\n            },\r\n            blueMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.blueMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[12] = value, this._createjsParams.blueMultiplier = value;\r\n                }\r\n            },\r\n            alphaMultiplier: {\r\n                get() {\r\n                    return this._createjsParams.alphaMultiplier;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[18] = value, this._createjsParams.alphaMultiplier = value;\r\n                },\r\n            },\r\n            redOffset: {\r\n                get() {\r\n                    return this._createjsParams.redOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[4] = value / 255, this._createjsParams.redOffset = value;\r\n                }\r\n            },\r\n            greenOffset: {\r\n                get() {\r\n                    return this._createjsParams.greenOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[9] = value / 255, this._createjsParams.greenOffset = value;\r\n                }\r\n            },\r\n            blueOffset: {\r\n                get() {\r\n                    return this._createjsParams.blueOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[14] = value / 255, this._createjsParams.blueOffset = value;\r\n                }\r\n            },\r\n            alphaOffset: {\r\n                get() {\r\n                    return this._createjsParams.alphaOffset;\r\n                },\r\n                set(value) {\r\n                    this._pixiData.instance.matrix[19] = value / 255, this._createjsParams.alphaOffset = value;\r\n                }\r\n            }\r\n        });\r\n        P$6.apply(this, args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsColorFilter.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsColorFilterParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiColorMatrixFilterData(createObject(CreatejsColorFilter.prototype)),\r\n        writable: true\r\n    }\r\n});\n\nfunction playSound(id, loop, offset) {\r\n    return createjs.Sound.play(id, {\r\n        interrupt: createjs.Sound.INTERRUPT_EARLY,\r\n        loop,\r\n        offset\r\n    });\r\n}\r\n/*\r\nexport function dataURLToBlobURL(dataURL: string) {\r\n    const bin = atob(dataURL.replace(/^.*,/, ''));\r\n    const buffer = new Uint8Array(bin.length);\r\n    for (let i = 0; i < bin.length; i++) {\r\n        buffer[i] = bin.charCodeAt(i);\r\n    }\r\n\r\n    const p = dataURL.slice(5);\r\n    try{\r\n        const blob = new Blob([buffer.buffer], {\r\n            type: p.slice(0, p.indexOf(\";\"))\r\n        });\r\n        console.log(p.slice(0, p.indexOf(\";\")))\r\n        return (URL || webkitURL).createObjectURL(blob);\r\n    } catch (e){\r\n        throw e;\r\n    };\r\n}\r\n*/\r\n/**\r\n * Load the assets of createjs content published by Adobe Animate.\r\n * If you use multiple contents, each composition ID must be unique.\r\n * Please run \"Pixim.animate.init\" before running.\r\n */\r\nfunction loadAssetAsync(targets) {\r\n    var _a, _b;\r\n    if (!Array.isArray(targets)) {\r\n        targets = [targets];\r\n    }\r\n    const promises = [];\r\n    for (let i = 0; i < targets.length; i++) {\r\n        const target = targets[i];\r\n        if ((_a = target.options) === null || _a === void 0 ? void 0 : _a.useSound) {\r\n            window.playSound = playSound;\r\n        }\r\n        const comp = AdobeAn.getComposition(target.id);\r\n        if (!comp) {\r\n            throw new Error(`no composition: ${target.id}`);\r\n        }\r\n        const lib = comp.getLibrary();\r\n        const manifests = lib.properties.manifest;\r\n        const crossOrigin = typeof ((_b = target.options) === null || _b === void 0 ? void 0 : _b.crossOrigin) === 'boolean' ? target.options.crossOrigin : true;\r\n        for (let i = 0; i < manifests.length; i++) {\r\n            const manifest = manifests[i];\r\n            manifest.src = utils.url.resolve(target.basepath, manifest.src);\r\n            if (manifest.src.indexOf('data:image') === 0) {\r\n                manifest.type = createjs.Types.IMAGE;\r\n            }\r\n            else if (manifest.src.indexOf('data:audio') === 0) {\r\n                /* note\r\n                    It seems that data URL format sounds are not supported by the createjs loader.\r\n                    Converting to blob URL also didn't work.\r\n                */\r\n                throw new Error(\"data URL formatted sound is not supported.\");\r\n                /*\r\n                manifest.type = createjs.Types.SOUND;\r\n                manifest.src = dataURLToBlobURL(manifest.src);\r\n                */\r\n            }\r\n        }\r\n        if (crossOrigin) {\r\n            for (let i = 0; i < manifests.length; i++) {\r\n                manifests[i].crossOrigin = true;\r\n            }\r\n        }\r\n        const loadPromise = new Promise((resolve, reject) => {\r\n            var _a;\r\n            if (manifests.length === 0) {\r\n                resolve({});\r\n            }\r\n            const loader = new createjs.LoadQueue(false);\r\n            if ((_a = target.options) === null || _a === void 0 ? void 0 : _a.useSound) {\r\n                loader.installPlugin(createjs.Sound);\r\n            }\r\n            const errors = [];\r\n            loader.addEventListener('fileload', (evt) => {\r\n                handleFileLoad(evt, comp);\r\n            });\r\n            loader.addEventListener('complete', (evt) => {\r\n                if (errors.length) {\r\n                    reject(errors);\r\n                    return;\r\n                }\r\n                resolve(evt);\r\n            });\r\n            loader.addEventListener('error', (evt) => {\r\n                errors.push(evt.data);\r\n            });\r\n            loader.loadManifest(manifests || []);\r\n        })\r\n            .then((evt) => {\r\n            const ss = comp.getSpriteSheet();\r\n            const queue = evt.target;\r\n            const ssMetadata = lib.ssMetadata;\r\n            for (let i = 0; i < ssMetadata.length; i++) {\r\n                ss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n                    images: [\r\n                        queue.getResult(ssMetadata[i].name)\r\n                    ],\r\n                    frames: ssMetadata[i].frames\r\n                });\r\n            }\r\n            return lib;\r\n        });\r\n        promises.push(loadPromise\r\n            .then((lib) => {\r\n            var _a;\r\n            for (let i in lib) {\r\n                if (lib[i].prototype instanceof CreatejsMovieClip) {\r\n                    lib[i].prototype._framerateBase = lib.properties.fps;\r\n                    lib[i].prototype._useFrameEvent = (_a = target.options) === null || _a === void 0 ? void 0 : _a.useFrameEvent;\r\n                }\r\n            }\r\n            return lib;\r\n        }));\r\n    }\r\n    return Promise.all(promises)\r\n        .then((resolvers) => {\r\n        if (resolvers.length === 1) {\r\n            return resolvers[0];\r\n        }\r\n        return resolvers;\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nclass CreatejsController {\r\n    constructor(container) {\r\n        this._createjsData = {\r\n            id: 0,\r\n            targets: {},\r\n            container\r\n        };\r\n    }\r\n    handleTick(delta) {\r\n        // delta timeが1以上になるとフレーム飛びするので\r\n        const e = { delta: Math.min(delta, 1) };\r\n        const targets = this._createjsData.targets;\r\n        for (let i in targets) {\r\n            targets[i].updateForPixi(e);\r\n        }\r\n    }\r\n    _addCreatejs(cjs) {\r\n        if (cjs instanceof CreatejsMovieClip) {\r\n            const p = cjs.pixi.parent;\r\n            cjs.pixi.once('added', () => {\r\n                if (cjs.pixi.parent !== p) {\r\n                    cjs.gotoAndPlay(0);\r\n                }\r\n                const id = this._createjsData.id++;\r\n                this._createjsData.targets[id] = cjs;\r\n                cjs.pixi.once('removed', () => {\r\n                    delete (this._createjsData.targets[id]);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    addCreatejs(cjs) {\r\n        this._addCreatejs(cjs);\r\n        this._createjsData.container.addChild(cjs.pixi);\r\n        return cjs;\r\n    }\r\n    addCreatejsAt(cjs, index) {\r\n        this._addCreatejs(cjs);\r\n        this._createjsData.container.addChildAt(cjs.pixi, index);\r\n        return cjs;\r\n    }\r\n    removeCreatejs(cjs) {\r\n        this._createjsData.container.removeChild(cjs.pixi);\r\n        return cjs;\r\n    }\r\n}\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nclass Container extends Container$1 {\r\n    constructor() {\r\n        super();\r\n        this._createjsData = {\r\n            controller: new CreatejsController(this)\r\n        };\r\n    }\r\n    handleTick(delta) {\r\n        return this._createjsData.controller.handleTick(delta);\r\n    }\r\n    addCreatejs(cjs) {\r\n        return this._createjsData.controller.addCreatejs(cjs);\r\n    }\r\n    addCreatejsAt(cjs, index) {\r\n        return this._createjsData.controller.addCreatejsAt(cjs, index);\r\n    }\r\n    removeCreatejs(cjs) {\r\n        return this._createjsData.controller.removeCreatejs(cjs);\r\n    }\r\n}\n\n// overrides\r\ncreatejs.Stage = CreatejsStage;\r\ncreatejs.StageGL = CreatejsStageGL;\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Sprite = CreatejsSprite;\r\ncreatejs.Shape = CreatejsShape;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Graphics = CreatejsGraphics;\r\ncreatejs.Text = CreatejsText;\r\ncreatejs.ButtonHelper = CreatejsButtonHelper;\r\ncreatejs.ColorFilter = CreatejsColorFilter;\r\n// install plugins\r\ncreatejs.MotionGuidePlugin.install();\n\nexport { AnimateEvent, Container, CreatejsBitmap, CreatejsButtonHelper, CreatejsColorFilter, CreatejsController, CreatejsGraphics, CreatejsMovieClip, CreatejsShape, CreatejsSprite, CreatejsStage, CreatejsStageGL, CreatejsText, EventManager, PixiBitmap, PixiColorMatrixFilter, PixiGraphics, PixiMovieClip, PixiShape, PixiSprite, PixiText, PixiTextContainer, ReachLabelEvent, createCreatejsParams, createPixiData, createjsInteractionEvents, loadAssetAsync, mixinCreatejsDisplayObject, updateDisplayObjectChildren };\n//# sourceMappingURL=pixi-animate-container.esm.js.map\n","import { CreatejsMovieClip as _CreatejsMovieClip } from '@tawaship/pixi-animate-container';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-container [[https://tawaship.github.io/pixi-animate-container/classes/createjsmovieclip.html | CreatejsMovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends _CreatejsMovieClip {\r\n\t/**\r\n\t * Replace child instance\r\n\t * \r\n\t * @param name Name of old instancee.\r\n\t * @param cls Class of new instance.\r\n\t */\r\n\treplaceInstance(name: string, cls: typeof CreatejsMovieClip) {\r\n\t\tconst old = this[name];\r\n\t\t\r\n\t\tif (!old) {\r\n\t\t\tconsole.warn(`instance '${name}' was not found.`);\r\n\t\t}\r\n\t\t\r\n\t\tconst props = ['x', 'y', 'scaleX', 'scaleY', 'rotation', 'skewX', 'skewY', 'regX', 'regY', '_off', 'alpha'];\r\n\t\t\r\n\t\tconst instance = this[name] = new cls(old.mode, old.startPosition, old.loop, old.timeline.reversed);\r\n\t\t\r\n\t\tconst tweens = this.timeline.tweens;\r\n\t\tfor (let i = 0; i < tweens.length; i++) {\r\n\t\t\tconst target = tweens[i].target;\r\n\t\t\t\r\n\t\t\tif (Array.isArray(target.state)) {\r\n\t\t\t\tfor (let j = 0; j < target.state.length; j++) {\r\n\t\t\t\t\tif (target.state[j].t === old) {\r\n\t\t\t\t\t\ttarget.state[j].t = instance;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (target === old) {\r\n\t\t\t\ttweens[i].target = instance;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < props.length; i++) {\r\n\t\t\tinstance[props[i]] = old[props[i]];\r\n\t\t}\r\n\t\t\r\n\t\tif (old.mask) {\r\n\t\t\tinstance.mask = old.mask;\r\n\t\t\told.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (old.filters) {\r\n\t\t\tinstance.filters = old.filters;\r\n\t\t\told.filters = null;\r\n\t\t\t\r\n\t\t\tconst nominalBounds = instance.nominalBounds;\r\n\t\t\tinstance.cache(nominalBounds.x - 2, nominalBounds.y - 2, nominalBounds.width + 4, nominalBounds.height + 4);\r\n\t\t}\r\n\t\t\r\n\t\tthis.removeChild(old);\r\n\t\t\r\n\t\treturn instance;\r\n\t}\r\n}\r\n","import { Texture } from 'pixi.js';\r\nimport { CreatejsSprite as _CreatejsSprite } from '@tawaship/pixi-animate-container';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-container [[https://tawaship.github.io/pixi-animate-container/classes/createjssprite.html | CreatejsSprite]]\r\n */\r\nexport class CreatejsSprite extends _CreatejsSprite {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import { Texture } from 'pixi.js';\r\nimport { CreatejsBitmap as _CreatejsBitmap } from '@tawaship/pixi-animate-container';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-container [[https://tawaship.github.io/pixi-animate-container/classes/createjsbitmap.html | CreatejsBitmap]]\r\n */\r\nexport class CreatejsBitmap extends _CreatejsBitmap {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import { BlobLoader, ILoaderOption, ILoaderResourceDictionary, ILoaderTargetDictionary, LoaderBase, LoaderResource } from \"@tawaship/pixim.js\";\r\n\r\nexport type TAnimateBlobLoaderRawResource = string;\r\n\r\nexport class AnimateBlobLoaderResource extends LoaderResource<TAnimateBlobLoaderRawResource> {\r\n\tdestroy() {\r\n\t\tif (this._data) {\r\n\t\t\t(window.URL || window.webkitURL).revokeObjectURL(this._data);\r\n\t\t}\r\n\t\t\r\n\t\tthis._data = '';\r\n\t}\r\n}\r\n\r\nexport type TAnimateBlobLoaderTarget = string;\r\n\r\nexport interface IAnimateBlobLoaderTargetDictionary extends ILoaderTargetDictionary<TAnimateBlobLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateBlobLoaderResourceDictionary extends ILoaderResourceDictionary<AnimateBlobLoaderResource> {\r\n\r\n}\r\n\r\nexport interface IAnimateBlobLoaderOption extends ILoaderOption {\r\n\r\n}\r\n\r\nexport class AnimateBlobLoader extends LoaderBase<TAnimateBlobLoaderTarget, TAnimateBlobLoaderRawResource, AnimateBlobLoaderResource> {\r\n\tprotected _loadAsync(target: TAnimateBlobLoaderTarget, options: IAnimateBlobLoaderOption = {}) {\r\n\t\treturn new BlobLoader()\r\n\t\t\t.loadAsync(target, options)\r\n\t\t\t.then(resource => {\r\n\t\t\t\treturn resource.data;\r\n\t\t\t})\r\n\t\t\t.then(src => new AnimateBlobLoaderResource(src, null))\r\n\t\t\t.catch((e: any) => new AnimateBlobLoaderResource('', e));\r\n\t}\r\n}","import * as Pixim from '@tawaship/pixim.js';\r\nimport { loadAssetAsync, IAnimateLibrary, ILoadAssetOption, IAnimateManifest, IPrepareTarget } from '@tawaship/pixi-animate-container';\r\nimport { CreatejsMovieClip } from './createjs';\r\nimport { AnimateBlobLoader, TAnimateBlobLoaderTarget, IAnimateBlobLoaderOption } from './AnimateBlobLoader';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const AdobeAn: any;\r\n\r\nexport type TAnimateLoaderRawResource = IAnimateLibrary;\r\n\r\nexport class AnimateLoaderResource extends Pixim.LoaderResource<TAnimateLoaderRawResource> {\r\n\tdestroy() {\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport interface IAnimateLoaderTarget extends IPrepareTarget {\r\n\t/**\r\n\t * Javascript file path of Animate content.\r\n\t */\r\n\tfilepath?: string;\r\n};\r\n\r\nexport type TAnimateLoaderTarget = IAnimateLoaderTarget;\r\n\r\nexport interface IAnimateLoaderTargetDictionary extends Pixim.ILoaderTargetDictionary<TAnimateLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateLoaderResourceDictionary extends Pixim.ILoaderResourceDictionary<TAnimateLoaderRawResource> {\r\n\r\n}\r\n\r\nexport interface IAnimateLoaderOption extends Pixim.ILoaderOption, ILoadAssetOption {\r\n\t/**\r\n\t * Animate javascript file version.\r\n\t */\r\n\tfileVersion?: string | number;\r\n\t\r\n\t/**\r\n\t * Animate assets version.\r\n\t */\r\n\tassetVersion?: string | number;\r\n}\r\n\r\nexport class AnimateLoader extends Pixim.LoaderBase<TAnimateLoaderTarget, TAnimateLoaderRawResource, AnimateLoaderResource> {\r\n\tprotected _loadAsync(target: TAnimateLoaderTarget, options: IAnimateLoaderOption = {}) {\r\n\t\treturn this._loadJsAsync(target, options)\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst comp = AdobeAn.getComposition(target.id);\r\n\t\t\t\tif (!comp) {\r\n\t\t\t\t\tthrow new Error(`no composition: ${target.id}`);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst lib: IAnimateLibrary = comp.getLibrary();\r\n\t\t\t\tconst manifests: IAnimateManifest[] = lib.properties.manifest;\r\n\t\t\t\tconst _target = Object.assign({}, target, { basepath: Pixim.utils.resolvePath(options.basepath || \"\", target.basepath) });\r\n\t\t\t\t\r\n\t\t\t\treturn this._prepareAssetsAsync(_target.basepath || \"\", manifests, options)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tconst version = options.assetVersion || options.version || '';\r\n\t\t\t\t\t\tfor (let i = 0; i < manifests.length; i++) {\r\n\t\t\t\t\t\t\tconst manifest = manifests[i];\r\n\t\t\t\t\t\t\tmanifest.src = Pixim.utils.resolveUri(\"\", manifest.src, version);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn loadAssetAsync(_target);\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.then(lib => {\r\n\t\t\t\treturn new AnimateLoaderResource(lib, null);\r\n\t\t\t})\r\n\t\t\t.catch(e => new AnimateLoaderResource({}, e));\r\n\t}\r\n\t\r\n\tprivate _loadJsAsync(target: TAnimateLoaderTarget, options: IAnimateLoaderOption) {\r\n\t\tif (!target.filepath) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\t\r\n\t\tconst filepath = Pixim.utils.resolveUri(target.basepath, target.filepath);\r\n\t\t\r\n\t\tconst loader = new Pixim.JsLoader();\r\n\t\t\r\n\t\treturn loader.loadAsync(filepath, Object.assign({}, options, { version: options.fileVersion || options.version }))\r\n\t\t\t.then(resource => {\r\n\t\t\t\tif (resource.error) {\r\n\t\t\t\t\tthrow resource.error;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tresource.ref();\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tprivate _prepareAssetsAsync(basepath: string, manifests: IAnimateManifest[], options: IAnimateLoaderOption) {\r\n\t\tconst targets: Pixim.ILoaderTargetDictionary<TAnimateBlobLoaderTarget> = {};\r\n\t\t\r\n\t\tif (!options.xhr)  {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < manifests.length; i++) {\r\n\t\t\tconst manifest = manifests[i];\r\n\t\t\t\r\n\t\t\tif (!Pixim.utils.isUrl(manifest.src)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttargets[i] = Pixim.utils.resolveUri(basepath, manifest.src);\r\n\t\t}\r\n\t\t\r\n\t\tif (Object.keys(targets).length === 0) {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t\t\r\n\t\tconst loader = new AnimateBlobLoader();\r\n\t\t\r\n\t\treturn loader.loadAllAsync(targets, Object.assign({}, options, { version: options.assetVersion || options.version }))\r\n\t\t\t.then(resources => {\r\n\t\t\t\tfor (let i in resources) {\r\n\t\t\t\t\tconst resource = resources[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (resource.error) {\r\n\t\t\t\t\t\tthrow resource.error;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!resource.data) {\r\n\t\t\t\t\t\tthrow 'invalid resource';\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst _i = Number(i);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!manifests[_i]) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tmanifests[_i].src = resources[i].data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n}","import * as Pixim from '@tawaship/pixim.js';\r\nimport * as AnimateLoader from './AnimateLoader';\r\n\r\nexport interface IAnimateManifestTargetDictionary extends Pixim.IManifestTargetDictionary<AnimateLoader.TAnimateLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateDictionary extends Pixim.IRawResourceDictionary<AnimateLoader.TAnimateLoaderRawResource> {\r\n\r\n}\r\n\r\nexport class AnimateManifest extends Pixim.ManifestBase<AnimateLoader.TAnimateLoaderTarget, AnimateLoader.TAnimateLoaderRawResource, AnimateLoader.AnimateLoaderResource> {\r\n\tprotected _createLoader() {\r\n\t\treturn new AnimateLoader.AnimateLoader();\r\n\t}\r\n}","import { Content as PiximContent } from '@tawaship/pixim.js';\r\nimport { AnimateManifest, IAnimateManifestTargetDictionary } from './AnimateManifest';\r\nexport { ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-container';\r\n\r\nPiximContent.registerManifest('animates', AnimateManifest);\r\n\r\n/**\r\n * Define animate assets for class.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] class.\r\n */\r\nexport function defineAnimatesTo(Content: typeof PiximContent, data: IAnimateManifestTargetDictionary) {\r\n\tContent.defineTargets('animates', data, {});\r\n}\r\n\r\n/**\r\n * Define animate assets for instance.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] instance.\r\n */\r\nexport function addAnimatesTo(content: PiximContent, data: IAnimateManifestTargetDictionary) {\r\n\tcontent.addTargets('animates', data, {});\r\n}","import { Container as PiximContainer, Task, ITickerData } from '@tawaship/pixim.js';\r\nimport { Container as _PixiAnimateContainer, CreatejsController, IAnimateContainer, TCreatejsObject } from '@tawaship/pixi-animate-container';\r\n\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nexport class Container extends PiximContainer implements IAnimateContainer {\r\n\tprivate _createjsData: {\r\n\t\tcontroller: CreatejsController;\r\n\t\ttask: Task;\r\n\t};\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjsData = {\r\n\t\t\tcontroller: new CreatejsController(this),\r\n\t\t\ttask: new Task([], this),\r\n\t\t};\r\n\r\n\t\tthis._createjsData.task.add((e: ITickerData) => {\r\n\t\t\tthis.handleTick(e.delta);\r\n\t\t});\r\n\t\tthis._createjsData.task.first();\r\n\t}\r\n\r\n\tupdateTask(e: ITickerData) {\r\n\t\tsuper.updateTask(e);\r\n\t\t\r\n\t\tconst task = this._createjsData.task;\r\n\t\t\r\n\t\tif (!this.taskEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\ttask.done(e);\r\n\t}\r\n\r\n\thandleTick(delta: number) {\r\n\t\treturn this._createjsData.controller.handleTick(delta);\r\n\t}\r\n\t\r\n\taddCreatejs(cjs: TCreatejsObject) {\r\n\t\treturn this._createjsData.controller.addCreatejs(cjs);\r\n\t}\r\n\t\r\n\taddCreatejsAt(cjs: TCreatejsObject, index: number) {\r\n\t\treturn this._createjsData.controller.addCreatejsAt(cjs, index);\r\n\t}\r\n\t\r\n\tremoveCreatejs(cjs: TCreatejsObject) {\r\n\t\treturn this._createjsData.controller.removeCreatejs(cjs);\r\n\t}\r\n}","import * as PA from './createjs/modules';\r\nimport createjs from '@tawaship/createjs-module';\r\n\r\n// overrides\r\ncreatejs.MovieClip = PA.CreatejsMovieClip;\r\ncreatejs.Bitmap = PA.CreatejsBitmap;\r\ncreatejs.Sprite = PA.CreatejsSprite;\r\n\r\nexport * from './core';\r\nexport * from './Container';\r\nexport * from './AnimateManifest';\r\nexport * from './AnimateLoader';\r\nexport * from './AnimateBlobLoader';"],"names":["CreatejsButtonHelper","super","args","const","createjs","pixi","baseFrame","overFrame","downFrame","hit","arguments","hitFrame","gotoAndStop","hitPixi","addChild","alpha","let","isOver","isDown","on","interactive","cursor","ButtonHelper","createObject","proto","Object","create","DEG_TO_RAD","Math","PI","createPixiData","regObj","instance","updateDisplayObjectChildren","cjs","e","list","children","slice","i","l","length","updateForPixi","mixinCreatejsDisplayObject","superClass","C","prototypeAccessors","this","_pixiData","x","_createjsParams","value","y","scaleX","scale","scaleY","skewX","skew","skewY","regX","regY","rotation","visible","_off","renderable","addEventListener","type","cb","p","_createjsEventManager","add","removeEventListener","remove","removeAllEventListeners","removeAll","mask","masked","push","once","parent","createjsInteractionEvents","CreatejsStage","props","tickOnUpdate","tick","dispatchEvent","Stage","CreatejsStageGL","StageGL","EventManager","_downTarget","_cjs","_emitter","utils","EventEmitter","_onPointerDown","_onPointerMove","_onPointerUp","_onPointerUpOutside","_onPointerTap","_onPointerOver","_onPointerOut","ev","mousedown","currentTarget","target","rawX","data","global","rawY","emit","pressmove","pressup","click","rollover","rollout","eventNames","off","removeAllListeners","PixiMovieClip","_filterContainer","_createjs","filterContainer","Container$1","createCreatejsMovieClipParams","assign","filters","createPixiMovieClipData","pivot","subInstance","AnimateEvent","Event","ReachLabelEvent","label","P","MovieClip","CreatejsMovieClip","apply","framerate","_framerateBase","endAnimation","reachLabel","initialize","currentFrame","advance","delta","_useFrameEvent","totalFrames","labels","position","_updateState","prototypeAccessors$1","f","ColorFilter","child","addChildAt","index","removeChild","removeChildAt","removeAllChldren","removeChildren","prototype","defineProperties","writable","PixiSprite","prototypeAccessors$2","Sprite","createPixiSpriteData","anchor","P$1","CreatejsSprite","frame","spriteSheet","getFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","PixiShape","prototypeAccessors$3","createCreatejsShapeParams","graphics","createPixiShapeData","P$2","Shape","CreatejsShape","prototypeAccessors$4","PixiBitmap","prototypeAccessors$5","createPixiBitmapData","P$3","Bitmap","CreatejsBitmap","res","PixiGraphics","prototypeAccessors$6","Graphics","createPixiGraphicsData","strokeFill","strokeAlpha","LineCap","LINE_CAP","BUTT","ROUND","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","P$4","CreatejsGraphics","beginFill","moveTo","clone","endFill","containsPoint","beginHole","endHole","mt","lineTo","lt","arcTo","x1","y1","x2","y2","radius","at","arc","startAngle","endAngle","anticlockwise","a","quadraticCurveTo","cpx","cpy","qt","curveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","bt","w","h","drawRect","r","dr","closePath","cp","clear","c","_parseColor","color","charAt","parseInt","colors","replace","split","Number","ef","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","ss","beginStroke","s","drawRoundRect","drawRoundedRect","rr","drawCircle","dc","drawEllipse","de","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","dp","PixiText","Text","PixiTextContainer","text","_text","prototypeAccessors$7","createCreatejsTextParams","font","textAlign","lineHeight","lineWidth","createPixiTextData","P$5","CreatejsText","_font","_parseFont","t","fontWeight","fontSize","fontFamily","fill","wordWrap","call","prototypeAccessors$8","_align","shift","indexOf","style","align","height","wordWrapWidth","PixiColorMatrixFilter","prototypeAccessors$9","ColorMatrixFilter","createPixiColorMatrixFilterData","createCreatejsColorFilterParams","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","P$6","CreatejsColorFilter","pixiData","createjsParams","enumerable","get","set","matrix","prototypeAccessors$10","playSound","id","loop","offset","Sound","play","interrupt","INTERRUPT_EARLY","CreatejsController","container","_createjsData","targets","handleTick","min","_addCreatejs","gotoAndPlay","addCreatejs","addCreatejsAt","removeCreatejs","MotionGuidePlugin","install","replaceInstance","name","cls","old","console","warn","mode","startPosition","timeline","reversed","tweens","Array","isArray","state","j","nominalBounds","cache","_CreatejsMovieClip","replaceTexture","_CreatejsSprite","_CreatejsBitmap","AnimateBlobLoaderResource","destroy","_data","window","URL","webkitURL","revokeObjectURL","LoaderResource","AnimateBlobLoader","_loadAsync","options","BlobLoader","loadAsync","then","resource","src","catch","LoaderBase","AnimateLoaderResource","Pixim.LoaderResource","AnimateLoader","_loadJsAsync","comp","AdobeAn","getComposition","Error","manifests","getLibrary","properties","manifest","_target","basepath","Pixim.utils","resolvePath","_prepareAssetsAsync","version","assetVersion","resolveUri","_a","_b","promises","useSound","lib","crossOrigin","url","resolve","Types","IMAGE","loadPromise","Promise","reject","loader","LoadQueue","installPlugin","errors","evt","images","getImages","item","result","handleFileLoad","loadManifest","getSpriteSheet","queue","ssMetadata","SpriteSheet","getResult","frames","fps","useFrameEvent","all","resolvers","loadAssetAsync","filepath","Pixim.JsLoader","fileVersion","error","ref","xhr","isUrl","keys","loadAllAsync","resources","_i","Pixim.LoaderBase","AnimateManifest","_createLoader","AnimateLoader.AnimateLoader","Pixim.ManifestBase","registerManifest","Container","controller","task","Task","first","updateTask","taskEnabled","done","PiximContainer","PA.CreatejsMovieClip","PA.CreatejsBitmap","PA.CreatejsSprite","content","addTargets","Content","defineTargets"],"mappings":"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"}