{"version":3,"file":"Pixim-animate-container.js","sources":["../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/MovieClip.ts","../src/Bitmap.ts","../src/Sprite.ts","../src/AnimateLoader.ts","../src/loadJS.ts","../src/AnimateManifest.ts","../src/core.ts","../src/Container.ts"],"sourcesContent":["/*!\n * @tawaship/pixi-animate-core - v3.2.0\n * \n * @require pixi.js v^5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport createjs from '@tawaship/createjs-module';\nexport { default as createjs } from '@tawaship/createjs-module';\nimport { utils, Container, filters, Sprite, BaseTexture, Texture, Graphics, LINE_CAP, LINE_JOIN, Text } from 'pixi.js';\nexport { Point as PixiPoint } from 'pixi.js';\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nclass CreatejsButtonHelper extends createjs.ButtonHelper {\r\n    constructor(...args) {\r\n        super(...args);\r\n        const createjs = args[0];\r\n        const pixi = createjs.pixi;\r\n        const baseFrame = args[1];\r\n        const overFrame = args[2];\r\n        const downFrame = args[3];\r\n        const hit = arguments[5];\r\n        const hitFrame = args[6];\r\n        hit.gotoAndStop(hitFrame);\r\n        const hitPixi = pixi.addChild(hit.pixi);\r\n        hitPixi.alpha = 0.00001;\r\n        let isOver = false;\r\n        let isDown = false;\r\n        hitPixi.on('pointerover', function () {\r\n            isOver = true;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(downFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerout', function () {\r\n            isOver = false;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerdown', function () {\r\n            isDown = true;\r\n            createjs.gotoAndStop(downFrame);\r\n        });\r\n        hitPixi.on('pointerup', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerupoutside', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.interactive = true;\r\n        hitPixi.cursor = 'pointer';\r\n    }\r\n}\n\nfunction createObject(proto) {\r\n    return Object.create(proto);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\n\nfunction createPixiData(pixi, regObj) {\r\n    return {\r\n        regObj,\r\n        instance: pixi\r\n    };\r\n}\r\nfunction createCreatejsParams() {\r\n    return {\r\n        x: 0,\r\n        y: 0,\r\n        scaleX: 0,\r\n        scaleY: 0,\r\n        regX: 0,\r\n        regY: 0,\r\n        skewX: 0,\r\n        skewY: 0,\r\n        rotation: 0,\r\n        visible: true,\r\n        alpha: 1,\r\n        _off: false,\r\n        mask: null\r\n    };\r\n}\r\nfunction updateDisplayObjectChildren(cjs, e) {\r\n    const list = cjs.children.slice();\r\n    for (let i = 0, l = list.length; i < l; i++) {\r\n        const child = list[i];\r\n        child.updateForPixi(e);\r\n    }\r\n    return true;\r\n}\r\nfunction mixinCreatejsDisplayObject(superClass) {\r\n    class C extends superClass {\r\n        get pixi() {\r\n            return this._pixiData.instance;\r\n        }\r\n        get x() {\r\n            return this._createjsParams.x;\r\n        }\r\n        set x(value) {\r\n            this._pixiData.instance.x = value;\r\n            this._createjsParams.x = value;\r\n        }\r\n        get y() {\r\n            return this._createjsParams.y;\r\n        }\r\n        set y(value) {\r\n            this._pixiData.instance.y = value;\r\n            this._createjsParams.y = value;\r\n        }\r\n        get scaleX() {\r\n            return this._createjsParams.scaleX;\r\n        }\r\n        set scaleX(value) {\r\n            this._pixiData.instance.scale.x = value;\r\n            this._createjsParams.scaleX = value;\r\n        }\r\n        get scaleY() {\r\n            return this._createjsParams.scaleY;\r\n        }\r\n        set scaleY(value) {\r\n            this._pixiData.instance.scale.y = value;\r\n            this._createjsParams.scaleY = value;\r\n        }\r\n        get skewX() {\r\n            return this._createjsParams.skewX;\r\n        }\r\n        set skewX(value) {\r\n            this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n            this._createjsParams.skewX = value;\r\n        }\r\n        get skewY() {\r\n            return this._createjsParams.skewY;\r\n        }\r\n        set skewY(value) {\r\n            this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n            this._createjsParams.skewY = value;\r\n        }\r\n        get regX() {\r\n            return this._createjsParams.regX;\r\n        }\r\n        set regX(value) {\r\n            this._pixiData.regObj.x = value;\r\n            this._createjsParams.regX = value;\r\n        }\r\n        get regY() {\r\n            return this._createjsParams.regY;\r\n        }\r\n        set regY(value) {\r\n            this._pixiData.regObj.y = value;\r\n            this._createjsParams.regY = value;\r\n        }\r\n        get rotation() {\r\n            return this._createjsParams.rotation;\r\n        }\r\n        set rotation(value) {\r\n            this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n            this._createjsParams.rotation = value;\r\n        }\r\n        get visible() {\r\n            return this._createjsParams.visible;\r\n        }\r\n        set visible(value) {\r\n            value = !!value;\r\n            this._pixiData.instance.visible = value;\r\n            this._createjsParams.visible = value;\r\n        }\r\n        get alpha() {\r\n            return this._createjsParams.alpha;\r\n        }\r\n        set alpha(value) {\r\n            this._pixiData.instance.alpha = value;\r\n            this._createjsParams.alpha = value;\r\n        }\r\n        get _off() {\r\n            return this._createjsParams._off;\r\n        }\r\n        set _off(value) {\r\n            this._pixiData.instance.renderable = !value;\r\n            this._createjsParams._off = value;\r\n        }\r\n        addEventListener(type, cb, ...args) {\r\n            if (!(cb instanceof CreatejsButtonHelper)) {\r\n                this._createjsEventManager.add(type, cb);\r\n            }\r\n            return super.addEventListener(type, cb, ...args);\r\n        }\r\n        removeEventListener(type, cb, ...args) {\r\n            if (!(cb instanceof CreatejsButtonHelper)) {\r\n                this._createjsEventManager.remove(type, cb);\r\n            }\r\n            return super.removeEventListener(type, cb, ...args);\r\n        }\r\n        removeAllEventListeners(type, ...args) {\r\n            this._createjsEventManager.removeAll(type);\r\n            return super.removeAllEventListeners(type, ...args);\r\n        }\r\n        get mask() {\r\n            return this._createjsParams.mask;\r\n        }\r\n        set mask(value) {\r\n            if (value) {\r\n                value.masked.push(this._pixiData.instance);\r\n                this._pixiData.instance.mask = value.pixi;\r\n                this._pixiData.instance.once('added', () => {\r\n                    this._pixiData.instance.parent.addChild(value.pixi);\r\n                });\r\n            }\r\n            else {\r\n                this._pixiData.instance.mask = null;\r\n            }\r\n            this._createjsParams.mask = value;\r\n        }\r\n    }\r\n    return C;\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nclass CreatejsStage extends createjs.Stage {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nclass CreatejsStageGL extends createjs.StageGL {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\n/**\r\n * @ignore\r\n */\r\nconst createjsInteractionEvents = {\r\n    mousedown: true,\r\n    pressmove: true,\r\n    pressup: true,\r\n    rollover: true,\r\n    rollout: true,\r\n    click: true\r\n};\r\nclass EventManager {\r\n    constructor(cjs) {\r\n        this._isDown = false;\r\n        this._cjs = cjs;\r\n        this._emitter = new utils.EventEmitter();\r\n        const pixi = cjs.pixi;\r\n        pixi\r\n            .on('pointerdown', this._onPointerDown, this)\r\n            .on('pointermove', this._onPointerMove, this)\r\n            .on('pointerup', this._onPointerUp, this)\r\n            .on('pointerupoutside', this._onPointerUpOutside, this)\r\n            .on('pointertap', this._onPointerTap, this)\r\n            .on('pointerover', this._onPointerOver, this)\r\n            .on('pointerout', this._onPointerOut, this);\r\n    }\r\n    _onPointerDown(e) {\r\n        e.currentTarget = e.currentTarget.createjs;\r\n        e.target = e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._isDown = true;\r\n        this._emitter.emit('mousedown', e);\r\n    }\r\n    _onPointerMove(e) {\r\n        if (!this._isDown) {\r\n            return;\r\n        }\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('pressmove', e);\r\n    }\r\n    _onPointerUp(e) {\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._isDown = false;\r\n        this._emitter.emit('pressup', e);\r\n    }\r\n    _onPointerUpOutside(e) {\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._isDown = false;\r\n        this._emitter.emit('pressup', e);\r\n    }\r\n    _onPointerTap(e) {\r\n        e.currentTarget = this._cjs;\r\n        e.target = e.target && e.target.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('click', e);\r\n    }\r\n    _onPointerOver(e) {\r\n        e.currentTarget = e.currentTarget.createjs;\r\n        e.target = e.currentTarget.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('rollover', e);\r\n    }\r\n    _onPointerOut(e) {\r\n        e.currentTarget = e.currentTarget.createjs;\r\n        e.target = e.currentTarget.createjs;\r\n        const ev = e.data;\r\n        e.rawX = ev.global.x;\r\n        e.rawY = ev.global.y;\r\n        this._emitter.emit('rollout', e);\r\n    }\r\n    add(type, cb) {\r\n        if (!(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.off(type, cb);\r\n        this._emitter.on(type, cb);\r\n        if (this._emitter.eventNames().length > 0) {\r\n            this._cjs.pixi.interactive = true;\r\n        }\r\n    }\r\n    remove(type, cb) {\r\n        if (!(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.off(type, cb);\r\n        if (this._emitter.eventNames().length === 0) {\r\n            this._cjs.pixi.interactive = false;\r\n        }\r\n    }\r\n    removeAll(type) {\r\n        if (type && !(type in createjsInteractionEvents)) {\r\n            return;\r\n        }\r\n        this._emitter.removeAllListeners(type);\r\n        if (this._emitter.eventNames().length === 0) {\r\n            this._cjs.pixi.interactive = false;\r\n        }\r\n    }\r\n}\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiMovieClip extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._filterContainer = null;\r\n        this._createjs = cjs;\r\n    }\r\n    get filterContainer() {\r\n        return this._filterContainer;\r\n    }\r\n    set filterContainer(value) {\r\n        this._filterContainer = value;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams() {\r\n    return Object.assign(createCreatejsParams(), {\r\n        filters: null\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs) {\r\n    const pixi = new PixiMovieClip(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        subInstance: pixi\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.MovieClip;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nclass CreatejsMovieClip extends mixinCreatejsDisplayObject(createjs.MovieClip) {\r\n    constructor(...args) {\r\n        super();\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        this._updateState();\r\n        return updateDisplayObjectChildren(this, e);\r\n    }\r\n    get filters() {\r\n        return this._createjsParams.filters;\r\n    }\r\n    set filters(value) {\r\n        if (value) {\r\n            const list = [];\r\n            for (var i = 0; i < value.length; i++) {\r\n                const f = value[i];\r\n                if (f instanceof createjs.ColorMatrixFilter) {\r\n                    continue;\r\n                }\r\n                const m = new filters.ColorMatrixFilter();\r\n                m.matrix = [\r\n                    f.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n                    0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n                    0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n                    0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n                    0, 0, 0, 0, 1\r\n                ];\r\n                list.push(m);\r\n            }\r\n            var o = this._pixiData.instance;\r\n            var c = o.children;\r\n            var n = new Container();\r\n            var nc = this._pixiData.subInstance = n.addChild(new Container());\r\n            while (c.length) {\r\n                nc.addChild(c[0]);\r\n            }\r\n            o.addChild(n);\r\n            o.filterContainer = nc;\r\n            nc.updateTransform();\r\n            nc.calculateBounds();\r\n            const b = nc.getLocalBounds();\r\n            const x = b.x;\r\n            const y = b.y;\r\n            for (var i = 0; i < nc.children.length; i++) {\r\n                const child = nc.children[i];\r\n                child.x -= x;\r\n                child.y -= y;\r\n                if (child instanceof PixiMovieClip) {\r\n                    const fc = child.filterContainer;\r\n                    if (fc) {\r\n                        fc.cacheAsBitmap = false;\r\n                    }\r\n                }\r\n            }\r\n            n.x = x;\r\n            n.y = y;\r\n            nc.filters = list;\r\n            nc.cacheAsBitmap = true;\r\n        }\r\n        else {\r\n            const o = this._pixiData.instance;\r\n            if (o.filterContainer) {\r\n                const nc = this._pixiData.subInstance;\r\n                const n = nc.parent;\r\n                const c = nc.children;\r\n                o.removeChildren();\r\n                o.filterContainer = null;\r\n                while (c.length) {\r\n                    const v = o.addChild(c[0]);\r\n                    v.x += n.x;\r\n                    v.y += n.y;\r\n                }\r\n                nc.filters = [];\r\n                nc.cacheAsBitmap = false;\r\n                this._pixiData.subInstance = o;\r\n            }\r\n        }\r\n        this._createjsParams.filters = value;\r\n    }\r\n    addChild(child) {\r\n        this._pixiData.subInstance.addChild(child.pixi);\r\n        return super.addChild(child);\r\n    }\r\n    addChildAt(child, index) {\r\n        this._pixiData.subInstance.addChildAt(child.pixi, index);\r\n        return super.addChildAt(child, index);\r\n    }\r\n    removeChild(child) {\r\n        this._pixiData.subInstance.removeChild(child.pixi);\r\n        return super.removeChild(child);\r\n    }\r\n    removeChildAt(index) {\r\n        this._pixiData.subInstance.removeChildAt(index);\r\n        return super.removeChildAt(index);\r\n    }\r\n    removeAllChldren() {\r\n        this._pixiData.subInstance.removeChildren();\r\n        return super.removeAllChldren();\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsMovieClipParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiMovieClipData(createObject(CreatejsMovieClip.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiSprite extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs) {\r\n    const pixi = new PixiSprite(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$1 = createjs.Sprite;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nclass CreatejsSprite extends mixinCreatejsDisplayObject(createjs.Sprite) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$1.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    gotoAndStop(...args) {\r\n        super.gotoAndStop(...args);\r\n        const frame = this.spriteSheet.getFrame(this.currentFrame);\r\n        const baseTexture = BaseTexture.from(frame.image);\r\n        const texture = new Texture(baseTexture, frame.rect);\r\n        this._pixiData.instance.texture = texture;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsSpriteParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiSpriteData(createObject(CreatejsSprite.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiShape extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        graphics\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs) {\r\n    const pixi = new PixiShape(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        masked: []\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$2 = createjs.Shape;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nclass CreatejsShape extends mixinCreatejsDisplayObject(createjs.Shape) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$2.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get graphics() {\r\n        return this._createjsParams.graphics;\r\n    }\r\n    set graphics(value) {\r\n        if (this._pixiData.masked.length) {\r\n            this._pixiData.instance.removeChildren();\r\n            if (value) {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = this._pixiData.instance;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = null;\r\n                }\r\n            }\r\n        }\r\n        if (value) {\r\n            this._pixiData.instance.addChild(value.pixi);\r\n        }\r\n        this._createjsParams.graphics = value;\r\n    }\r\n    get masked() {\r\n        return this._pixiData.masked;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsShapeParams(null),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiShapeData(createObject(CreatejsShape.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiBitmap extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs) {\r\n    const pixi = new PixiBitmap(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$3 = createjs.Bitmap;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nclass CreatejsBitmap extends mixinCreatejsDisplayObject(createjs.Bitmap) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$3.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        const res = super.initialize(...args);\r\n        const texture = Texture.from(this.image);\r\n        this._pixiData.instance.texture = texture;\r\n        return res;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsBitmapParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiBitmapData(createObject(CreatejsBitmap.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nclass PixiGraphics extends Graphics {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs) {\r\n    const pixi = new PixiGraphics(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        strokeFill: 0,\r\n        strokeAlpha: 1\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n    0: LINE_CAP.BUTT,\r\n    1: LINE_CAP.ROUND,\r\n    2: LINE_CAP.SQUARE\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n    0: LINE_JOIN.MITER,\r\n    1: LINE_JOIN.ROUND,\r\n    2: LINE_JOIN.BEVEL\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst P$4 = createjs.Graphics;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nclass CreatejsGraphics extends mixinCreatejsDisplayObject(createjs.Graphics) {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$4.apply(this, args);\r\n        this._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n        this._pixiData.strokeFill = 0;\r\n        this._pixiData.strokeAlpha = 1;\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    // path methods\r\n    moveTo(x, y) {\r\n        if (this._pixiData.instance.clone().endFill().containsPoint({ x: x, y: y })) {\r\n            this._pixiData.instance.beginHole();\r\n        }\r\n        else {\r\n            this._pixiData.instance.endHole();\r\n        }\r\n        this._pixiData.instance.moveTo(x, y);\r\n        return super.moveTo(x, y);\r\n    }\r\n    mt(x, y) {\r\n        return this.moveTo(x, y);\r\n    }\r\n    lineTo(x, y) {\r\n        this._pixiData.instance.lineTo(x, y);\r\n        return super.lineTo(x, y);\r\n    }\r\n    lt(x, y) {\r\n        return this.lineTo(x, y);\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n        return super.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    at(x1, y1, x2, y2, radius) {\r\n        return this.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        this._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n        return super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    a(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        return this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    quadraticCurveTo(cpx, cpy, x, y) {\r\n        this._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n        return super.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    qt(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    curveTo(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        this._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n        return super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    bt(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        return this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    rect(x, y, w, h) {\r\n        this._pixiData.instance.drawRect(x, y, w, h);\r\n        return super.rect(x, y, w, h);\r\n    }\r\n    r(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    drawRect(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    dr(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    closePath() {\r\n        this._pixiData.instance.closePath();\r\n        return super.closePath();\r\n    }\r\n    cp() {\r\n        return this.closePath();\r\n    }\r\n    clear() {\r\n        this._pixiData.instance.clear();\r\n        return super.clear();\r\n    }\r\n    c() {\r\n        return this.clear();\r\n    }\r\n    _parseColor(color) {\r\n        const res = {\r\n            color: 0,\r\n            alpha: 1\r\n        };\r\n        if (!color) {\r\n            res.alpha = 0;\r\n            return res;\r\n        }\r\n        if (color.charAt(0) === '#') {\r\n            res.color = parseInt(color.slice(1), 16);\r\n            return res;\r\n        }\r\n        const colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n        res.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n        res.alpha = Number(colors[3]);\r\n        return res;\r\n    }\r\n    beginFill(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.instance.beginFill(c.color, c.alpha);\r\n        return super.beginFill(color);\r\n    }\r\n    f(color) {\r\n        return this.beginFill(color);\r\n    }\r\n    endFill() {\r\n        this._pixiData.instance.endFill();\r\n        return super.endFill();\r\n    }\r\n    ef() {\r\n        return this.endFill();\r\n    }\r\n    setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        this._pixiData.instance.lineTextureStyle({\r\n            width: thickness,\r\n            color: this._pixiData.strokeFill,\r\n            alpha: this._pixiData.strokeAlpha,\r\n            cap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n            join: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n            miterLimit\r\n        });\r\n        return super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    ss(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        return this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    beginStroke(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.strokeFill = c.color;\r\n        this._pixiData.strokeAlpha = c.alpha;\r\n        return super.beginStroke(color);\r\n    }\r\n    s(color) {\r\n        return this.beginStroke(color);\r\n    }\r\n    drawRoundRect(x, y, w, h, radius) {\r\n        this._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n        return super.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    rr(x, y, w, h, radius) {\r\n        return this.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pixiData.instance.drawCircle(x, y, radius);\r\n        return super.drawCircle(x, y, radius);\r\n    }\r\n    dc(x, y, radius) {\r\n        return this.drawCircle(x, y, radius);\r\n    }\r\n    drawEllipse(x, y, w, h) {\r\n        this._pixiData.instance.drawEllipse(x, y, w, h);\r\n        return super.drawEllipse(x, y, w, h);\r\n    }\r\n    de(x, y, w, h) {\r\n        return this.drawEllipse(x, y, w, h);\r\n    }\r\n    drawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n        this._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n        return super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n    dp(x, y, radius, sides, pointSize, angle) {\r\n        return this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsGraphicsParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiGraphicsData(createObject(CreatejsGraphics.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nclass PixiText extends Text {\r\n}\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiTextContainer extends Container {\r\n    constructor(cjs, text) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this._text = text;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN = 'left';\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text, font, color) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        text: text,\r\n        font: font,\r\n        color: color,\r\n        textAlign: DEF_ALIGN,\r\n        lineHeight: 0,\r\n        lineWidth: 0\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs, text) {\r\n    const pixi = new PixiTextContainer(cjs, text);\r\n    return createPixiData(pixi, pixi.pivot);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$5 = createjs.Text;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nclass CreatejsText extends mixinCreatejsDisplayObject(createjs.Text) {\r\n    constructor(text, font, color = '#000000', ...args) {\r\n        super(text, font, color, ...args);\r\n        this._createjsParams = createCreatejsTextParams(text, font, color);\r\n        const _font = this._parseFont(font);\r\n        const t = new PixiText(text, {\r\n            fontWeight: _font.fontWeight,\r\n            fontSize: _font.fontSize,\r\n            fontFamily: _font.fontFamily,\r\n            fill: this._parseColor(color),\r\n            wordWrap: true\r\n        });\r\n        this._pixiData = createPixiTextData(this, t);\r\n        this._pixiData.instance.addChild(t);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$5.call(this, text, font, color, ...args);\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get text() {\r\n        return this._createjsParams.text;\r\n    }\r\n    set text(text) {\r\n        this._pixiData.instance.text.text = text;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.text = text;\r\n    }\r\n    _parseFont(font) {\r\n        const p = font.split(' ');\r\n        let w = 'normal';\r\n        let s = p.shift() || '';\r\n        if (s.indexOf('px') === -1) {\r\n            w = s;\r\n            s = p.shift() || '';\r\n        }\r\n        return {\r\n            fontWeight: w,\r\n            fontSize: Number((s || '0px').replace('px', '')),\r\n            fontFamily: p.join(' ').replace(/'/g, '') //'\r\n        };\r\n    }\r\n    get font() {\r\n        return this._createjsParams.font;\r\n    }\r\n    set font(font) {\r\n        const _font = this._parseFont(font);\r\n        this._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n        this._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n        this._createjsParams.font = font;\r\n    }\r\n    _parseColor(color) {\r\n        return parseInt(color.slice(1), 16);\r\n    }\r\n    get color() {\r\n        return this._createjsParams.color;\r\n    }\r\n    set color(color) {\r\n        this._pixiData.instance.text.style.fill = this._parseColor(color);\r\n        this._createjsParams.color = color;\r\n    }\r\n    _align(align) {\r\n        if (align === 'left') {\r\n            this._pixiData.instance.text.x = 0;\r\n            return;\r\n        }\r\n        if (align === 'center') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n            return;\r\n        }\r\n        if (align === 'right') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width;\r\n            return;\r\n        }\r\n    }\r\n    get textAlign() {\r\n        return this._createjsParams.textAlign;\r\n    }\r\n    set textAlign(align) {\r\n        this._pixiData.instance.text.style.align = align;\r\n        this._align(align);\r\n        this._createjsParams.textAlign = align;\r\n    }\r\n    get lineHeight() {\r\n        return this._createjsParams.lineHeight;\r\n    }\r\n    set lineHeight(height) {\r\n        this._pixiData.instance.text.style.lineHeight = height;\r\n        this._createjsParams.lineHeight = height;\r\n    }\r\n    get lineWidth() {\r\n        return this._createjsParams.lineWidth;\r\n    }\r\n    set lineWidth(width) {\r\n        this._pixiData.instance.text.style.wordWrapWidth = width;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.lineWidth = width;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsTextParams('', '', ''),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiTextData(createObject(CreatejsText.prototype), new PixiText('')),\r\n        writable: true\r\n    }\r\n});\n\nfunction resolvePath(path, basepath) {\r\n    return utils.url.resolve(basepath, path);\r\n}\r\n/**\r\n * Load assets of createjs content published with Adobe Animate.\r\n *\r\n * @param comp Composition obtained from `AdobeAn.getComposition`.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction loadAssetAsync(comp, basepath, options = {}) {\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        if (basepath) {\r\n            basepath = basepath.replace(/([^\\/])$/, \"$1/\");\r\n        }\r\n        const loader = new createjs.LoadQueue(false);\r\n        loader.installPlugin(createjs.Sound);\r\n        const errors = [];\r\n        loader.addEventListener('fileload', (evt) => {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', (evt) => {\r\n            if (errors.length) {\r\n                reject(errors);\r\n                return;\r\n            }\r\n            resolve(evt);\r\n        });\r\n        loader.addEventListener('error', (evt) => {\r\n            errors.push(evt.data);\r\n        });\r\n        const manifests = [];\r\n        const origin = lib.properties.manifest;\r\n        for (let i = 0; i < origin.length; i++) {\r\n            const o = origin[i];\r\n            const m = {\r\n                src: resolvePath(o.src, basepath),\r\n                id: o.id\r\n            };\r\n            for (let i in o) {\r\n                if (!m[i]) {\r\n                    m[i] = o[i];\r\n                }\r\n            }\r\n            if (options.crossOrigin) {\r\n                m.crossOrigin = true;\r\n            }\r\n            if (o.src.indexOf('data:') === 0) {\r\n                m.type = 'image';\r\n            }\r\n            manifests.push(m);\r\n        }\r\n        loader.loadManifest(manifests);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\n// overrides\r\ncreatejs.Stage = CreatejsStage;\r\ncreatejs.StageGL = CreatejsStageGL;\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Sprite = CreatejsSprite;\r\ncreatejs.Shape = CreatejsShape;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Graphics = CreatejsGraphics;\r\ncreatejs.Text = CreatejsText;\r\ncreatejs.ButtonHelper = CreatejsButtonHelper;\r\n// install plugins\r\ncreatejs.MotionGuidePlugin.install();\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { CreatejsBitmap, CreatejsButtonHelper, CreatejsGraphics, CreatejsMovieClip, CreatejsShape, CreatejsSprite, CreatejsStage, CreatejsStageGL, CreatejsText, EventManager, PixiBitmap, PixiGraphics, PixiMovieClip, PixiShape, PixiSprite, PixiText, PixiTextContainer, createCreatejsParams, createPixiData, loadAssetAsync, mixinCreatejsDisplayObject, resolvePath, updateDisplayObjectChildren };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import { createjs, CreatejsMovieClip as _CreatejsMovieClip, ITickerData, TCreatejsObject } from '@tawaship/pixi-animate-core';\r\n\r\nexport { ITickerData } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P: number = 1000 / 60;\r\n\r\nexport class AnimateEvent extends createjs.Event {\r\n\tconstructor(type: string) {\r\n\t\tsuper(type);\r\n\t}\r\n};\r\n\r\nexport interface IReachLabelData {\r\n\t/**\r\n\t * Label name.\r\n\t */\r\n\tlabel: string;\r\n\t\r\n\t/**\r\n\t * Frame number of label.\r\n\t */\r\n\tposition: number;\r\n}\r\n\r\nexport class ReachLabelEvent extends AnimateEvent {\r\n\tdata: IReachLabelData;\r\n\t\r\n\tconstructor(type: string, label: IReachLabelData) {\r\n\t\tsuper(type);\r\n\t\t\r\n\t\tthis.data = label;\r\n\t}\r\n}\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjsmovieclip.html | CreatejsMovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends _CreatejsMovieClip {\r\n\tdeclare _framerateBase: number;\r\n\t\r\n\t/**\r\n\t * When the last frame of the timeline is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\tendAnimation?(e: AnimateEvent): void {}\r\n\t\r\n\t/**\r\n\t * When either labels is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\treachLabel?(e: ReachLabelEvent): void {}\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tsuper.initialize(...args);\r\n\t\t\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @override\r\n\t */\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\tconst currentFrame = this.currentFrame;\r\n\t\t\r\n\t\t// this.advance(e.delta * P);\r\n\t\tthis.advance(P * e.delta);\r\n\t\t\r\n\t\tif (currentFrame !== this.currentFrame) {\r\n\t\t\tif (this.currentFrame === (this.totalFrames - 1)) {\r\n\t\t\t\tthis.dispatchEvent(new AnimateEvent('endAnimation'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < this.labels.length; i++) {\r\n\t\t\t\tconst label = this.labels[i];\r\n\t\t\t\tif (this.currentFrame === label.position) {\r\n\t\t\t\t\tthis.dispatchEvent(new ReachLabelEvent('reachLabel', label));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.updateForPixi(e);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Replace child instance\r\n\t * \r\n\t * @param name Name of old instancee.\r\n\t * @param cls Class of new instance.\r\n\t */\r\n\treplaceInstance(name: string, cls: typeof CreatejsMovieClip) {\r\n\t\tconst old = this[name];\r\n\t\t\r\n\t\tif (!old) {\r\n\t\t\tconsole.warn(`instance '${name}' was not found.`);\r\n\t\t}\r\n\t\t\r\n\t\tconst props = ['x', 'y', 'scaleX', 'scaleY', 'rotation', 'skewX', 'skewY', 'regX', 'regY', '_off', 'alpha'];\r\n\t\t\r\n\t\tconst instance = this[name] = new cls(old.mode, old.startPosition, old.loop, old.timeline.reversed);\r\n\t\t\r\n\t\tconst tweens = this.timeline.tweens;\r\n\t\tfor (let i = 0; i < tweens.length; i++) {\r\n\t\t\tconst target = tweens[i].target;\r\n\t\t\t\r\n\t\t\tif (Array.isArray(target.state)) {\r\n\t\t\t\tfor (let j = 0; j < target.state.length; j++) {\r\n\t\t\t\t\tif (target.state[j].t === old) {\r\n\t\t\t\t\t\ttarget.state[j].t = instance;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (target === old) {\r\n\t\t\t\ttweens[i].target = instance;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < props.length; i++) {\r\n\t\t\tinstance[props[i]] = old[props[i]];\r\n\t\t}\r\n\t\t\r\n\t\tif (old.mask) {\r\n\t\t\tinstance.mask = old.mask;\r\n\t\t\told.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (old.filters) {\r\n\t\t\tinstance.filters = old.filters;\r\n\t\t\told.filters = null;\r\n\t\t\t\r\n\t\t\tconst nominalBounds = instance.nominalBounds;\r\n\t\t\tinstance.cache(nominalBounds.x - 2, nominalBounds.y - 2, nominalBounds.width + 4, nominalBounds.height + 4);\r\n\t\t}\r\n\t\t\r\n\t\tthis.removeChild(old);\r\n\t\t\r\n\t\treturn instance;\r\n\t}\r\n}\r\n\r\ndelete(CreatejsMovieClip.prototype.endAnimation);\r\ndelete(CreatejsMovieClip.prototype.reachLabel);","import { Texture } from 'pixi.js';\r\nimport { CreatejsBitmap as _CreatejsBitmap } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjsbitmap.html | CreatejsBitmap]]\r\n */\r\nexport class CreatejsBitmap extends _CreatejsBitmap {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import { Texture } from 'pixi.js';\r\nimport { CreatejsSprite as _CreatejsSprite } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjssprite.html | CreatejsSprite]]\r\n */\r\nexport class CreatejsSprite extends _CreatejsSprite {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import * as PIXI from 'pixi.js';\r\nimport * as Pixim from '@tawaship/pixim.js';\r\nimport { loadAssetAsync, ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-core';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\nimport loadJS from './loadJS';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const AdobeAn: any;\r\n\r\nexport type TAnimateLoaderRawResource = IAnimateLibrary;\r\n\r\nexport class AnimateLoaderResource extends Pixim.LoaderResource<TAnimateLoaderRawResource> {\r\n\tdestroy() {\r\n\t\t\r\n\t}\r\n}\r\n\r\nexport interface IAnimateLoaderTarget {\r\n\t/**\r\n\t * \"lib.properties.id\" in Animate content.\r\n\t */\r\n\tid: string;\r\n\t\r\n\t/**\r\n\t * Directory path of Animate content.\r\n\t */\r\n\tbasepath: string;\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/interfaces/iloadassetoption.html | PixiAnimateCore.ILoadAssetOption]]\r\n\t */\r\n\toptions?: ILoadAssetOption;\r\n\t\r\n\t/**\r\n\t * Javascript file path of Animate content.\r\n\t */\r\n\tfilepath?: string;\r\n};\r\n\r\nexport type TAnimateLoaderTarget = IAnimateLoaderTarget;\r\n\r\nexport interface IAnimateLoaderTargetDictionary extends Pixim.ILoaderTargetDictionary<TAnimateLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateLoaderResourceDictionary extends Pixim.ILoaderResourceDictionary<TAnimateLoaderRawResource> {\r\n\r\n}\r\n\r\nexport interface IAnimateLoaderOption extends Pixim.ILoaderOption {\r\n\t\r\n}\r\n\r\nexport class AnimateLoader extends Pixim.LoaderBase<TAnimateLoaderTarget, TAnimateLoaderRawResource> {\r\n\tloadAsync(target: TAnimateLoaderTarget, options: IAnimateLoaderOption = {}) {\r\n\t\treturn this._loadAsync(target, options)\r\n\t\t\t.then((resource: AnimateLoaderResource) => {\r\n\t\t\t\tif (!resource.error) {\r\n\t\t\t\t\tthis.emit(Pixim.EVENT_LOADER_ASSET_LOADED, { target, resource });\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn resource;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tloadAllAsync(targets: IAnimateLoaderTargetDictionary, options: IAnimateLoaderOption = {}) {\r\n\t\tconst res: Pixim.ILoaderResourceDictionary<TAnimateLoaderRawResource>  = {};\r\n\t\t\r\n\t\tif (Object.keys(targets).length === 0) {\r\n\t\t\treturn Promise.resolve(res);\r\n\t\t}\r\n\t\t\r\n\t\tconst promises = [];\r\n\t\t\r\n\t\tfor (let i in targets) {\r\n\t\t\tpromises.push(\r\n\t\t\t\tthis.loadAsync(targets[i], options)\r\n\t\t\t\t\t.then(resource => {\r\n\t\t\t\t\t\tres[i] = resource;\r\n\t\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\treturn Promise.all(promises)\r\n\t\t\t.then(() => {\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tprivate _loadAsync(target: TAnimateLoaderTarget, options: IAnimateLoaderOption = {}) {\r\n\t\tconst basepath = this._resolveBasepath(options.basepath);\r\n\t\tconst version = this._resolveVersion(options.version);\r\n\t\t\r\n\t\tconst p = !target.filepath\r\n\t\t\t? Promise.resolve()\r\n\t\t\t: (() => {\r\n\t\t\t\tconst filepath = Pixim.utils.resolvePath(target.filepath, target.basepath);\r\n\t\t\t\tconst url = this._resolveUrl(filepath, options);\r\n\t\t\t\t\r\n\t\t\t\treturn loadJS(url)\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tthrow `Animate: '${filepath}' cannot load.`;\r\n\t\t\t\t\t});\r\n\t\t\t})();\r\n\t\t\r\n\t\treturn p.then(() => {\r\n\t\t\tconst comp = AdobeAn.getComposition(target.id);\r\n\t\t\tif (!comp) {\r\n\t\t\t\tthrow new Error(`no composition: ${target.id}`);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst lib: IAnimateLibrary = comp.getLibrary();\r\n\t\t\tconst origin = lib.properties.manifest;\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < origin.length; i++) {\r\n\t\t\t\tconst o = origin[i];\r\n\t\t\t\tconst filepath = Pixim.utils.resolvePath(o.src, target.basepath);\r\n\t\t\t\to.src = this._resolveUrl(filepath, options);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn loadAssetAsync(comp, '', target.options);\r\n\t\t})\r\n\t\t.then(lib => {\r\n\t\t\tfor (let i  in lib) {\r\n\t\t\t\tif (lib[i].prototype instanceof CreatejsMovieClip) {\r\n\t\t\t\t\tlib[i].prototype._framerateBase = lib.properties.fps;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn new AnimateLoaderResource(lib, null);\r\n\t\t})\r\n\t\t.catch((e: any) => {\r\n\t\t\treturn new AnimateLoaderResource({}, e);\r\n\t\t});\r\n\t}\r\n}","export default function loadJS(src: string): Promise<void> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst script = document.createElement('script');\r\n\t\tscript.src = src;\r\n\t\tscript.addEventListener('load', () => {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\tresolve();\r\n\t\t});\r\n\t\tscript.addEventListener('error', (e: any) => {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\treject(e);\r\n\t\t});\r\n\t\tdocument.body.appendChild(script);\r\n\t});\r\n}","import * as Pixim from '@tawaship/pixim.js';\r\nimport * as AnimateLoader from './AnimateLoader';\r\n\r\nexport interface IAnimateManifestTargetDictionary extends Pixim.IManifestTargetDictionary<AnimateLoader.TAnimateLoaderTarget> {\r\n\r\n}\r\n\r\nexport interface IAnimateDictionary extends Pixim.IRawResourceDictionary<AnimateLoader.TAnimateLoaderRawResource> {\r\n\r\n}\r\n\r\nexport class AnimateManifest extends Pixim.ManifestBase<AnimateLoader.TAnimateLoaderTarget, AnimateLoader.TAnimateLoaderRawResource> {\r\n\tprotected _loadAsync(targets: IAnimateManifestTargetDictionary, options: AnimateLoader.IAnimateLoaderOption = {}) {\r\n\t\tconst loader = new AnimateLoader.AnimateLoader(options);\r\n\t\t\r\n\t\treturn this._doneLoaderAsync(loader, targets);\r\n\t}\r\n}","import { Content as PiximContent } from '@tawaship/pixim.js';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\nimport { CreatejsBitmap } from './Bitmap';\r\nimport { CreatejsSprite } from './Sprite';\r\nimport { AnimateManifest, IAnimateManifestTargetDictionary } from './AnimateManifest';\r\nimport { createjs } from '@tawaship/pixi-animate-core';\r\nexport { createjs, ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-core';\r\n\r\nPiximContent.registerManifest('animates', AnimateManifest);\r\n\r\n/**\r\n * Define animate assets for class.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] class.\r\n */\r\nexport function defineAnimatesTo(Content: typeof PiximContent, data: IAnimateManifestTargetDictionary) {\r\n\tContent.defineTargets('animates', data, {});\r\n}\r\n\r\n/**\r\n * Define animate assets for instance.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] instance.\r\n */\r\nexport function addAnimatesTo(content: PiximContent, data: IAnimateManifestTargetDictionary) {\r\n\tcontent.addTargets('animates', data, {});\r\n}\r\n\r\n// overrides\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Sprite = CreatejsSprite;","import { Container as _Container, Task, ITickerData } from '@tawaship/pixim.js';\r\nimport { TCreatejsObject } from '@tawaship/pixi-animate-core';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\n\r\nexport interface ICreatejsMovieClipDictionary {\r\n\t[id: number]: CreatejsMovieClip;\r\n}\r\n\r\nexport interface ICreatejsData {\r\n\tid: number;\r\n\ttargets: ICreatejsMovieClipDictionary;\r\n\ttask: Task;\r\n}\r\n\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nexport class Container extends _Container {\r\n\tprivate _createjsData: ICreatejsData;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._createjsData = {\r\n\t\t\tid: 0,\r\n\t\t\ttargets: {},\r\n\t\t\ttask: new Task([], this)\r\n\t\t};\r\n\t\t\r\n\t\tconst targets = this._createjsData.targets;\r\n\t\t\r\n\t\tthis._createjsData.task.add((e: ITickerData) => {\r\n\t\t\tfor (let i in targets) {\r\n\t\t\t\ttargets[i].updateForPixi(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._createjsData.task.first();\r\n\t}\r\n\t\r\n\t/**\r\n\t * @override\r\n\t */\r\n\tupdateTask(e: ITickerData) {\r\n\t\tsuper.updateTask(e);\r\n\t\t\r\n\t\tconst task = this._createjsData.task;\r\n\t\t\r\n\t\tif (!this.taskEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\ttask.done({ delta: Math.min(e.delta, 1) });\r\n\t}\r\n\t\r\n\tprivate _addCreatejs(cjs: TCreatejsObject) {\r\n\t\tif (cjs instanceof CreatejsMovieClip) {\r\n\t\t\tconst p = cjs.pixi.parent;\r\n\t\t\t\r\n\t\t\tcjs.pixi.once('added', () => {\r\n\t\t\t\tif (cjs.pixi.parent !== p) {\r\n\t\t\t\t\tcjs.gotoAndPlay(0);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst id = this._createjsData.id++;\r\n\t\t\t\tthis._createjsData.targets[id] = cjs;\r\n\t\t\t\t\r\n\t\t\t\tcjs.pixi.once('removed', () => {\r\n\t\t\t\t\tdelete(this._createjsData.targets[id]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejsAt(cjs: TCreatejsObject, index: number) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChildAt(cjs.pixi, index);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\tremoveCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis.removeChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n}"],"names":["CreatejsButtonHelper","super","args","const","createjs","pixi","baseFrame","overFrame","downFrame","hit","arguments","hitFrame","gotoAndStop","hitPixi","addChild","alpha","let","isOver","isDown","on","interactive","cursor","ButtonHelper","createObject","proto","Object","create","DEG_TO_RAD","Math","PI","createPixiData","regObj","instance","updateDisplayObjectChildren","cjs","e","list","children","slice","i","l","length","updateForPixi","mixinCreatejsDisplayObject","superClass","C","prototypeAccessors","this","_pixiData","x","_createjsParams","value","y","scaleX","scale","scaleY","skewX","skew","skewY","regX","regY","rotation","visible","_off","renderable","addEventListener","type","cb","_createjsEventManager","add","removeEventListener","remove","removeAllEventListeners","removeAll","mask","masked","push","once","parent","CreatejsStage","props","tickOnUpdate","tick","dispatchEvent","Stage","CreatejsStageGL","StageGL","createjsInteractionEvents","mousedown","pressmove","pressup","rollover","rollout","click","EventManager","_isDown","_cjs","_emitter","utils","EventEmitter","_onPointerDown","_onPointerMove","_onPointerUp","_onPointerUpOutside","_onPointerTap","_onPointerOver","_onPointerOut","currentTarget","target","ev","data","rawX","global","rawY","emit","off","eventNames","removeAllListeners","PixiMovieClip","_filterContainer","_createjs","filterContainer","Container","createCreatejsMovieClipParams","assign","filters","createPixiMovieClipData","pivot","subInstance","P","MovieClip","CreatejsMovieClip","apply","initialize","_updateState","prototypeAccessors$1","f","ColorMatrixFilter","m","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","nc","updateTransform","calculateBounds","b","getLocalBounds","child","fc","cacheAsBitmap","removeChildren","v","addChildAt","index","removeChild","removeChildAt","removeAllChldren","defineProperties","prototype","writable","PixiSprite","prototypeAccessors$2","Sprite","createPixiSpriteData","anchor","P$1","CreatejsSprite","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","PixiShape","prototypeAccessors$3","createCreatejsShapeParams","graphics","createPixiShapeData","P$2","Shape","CreatejsShape","prototypeAccessors$4","PixiBitmap","prototypeAccessors$5","createPixiBitmapData","P$3","Bitmap","CreatejsBitmap","res","PixiGraphics","prototypeAccessors$6","Graphics","createPixiGraphicsData","strokeFill","strokeAlpha","LineCap","LINE_CAP","BUTT","ROUND","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","P$4","CreatejsGraphics","beginFill","moveTo","clone","endFill","containsPoint","beginHole","endHole","mt","lineTo","lt","arcTo","x1","y1","x2","y2","radius","at","arc","startAngle","endAngle","anticlockwise","a","quadraticCurveTo","cpx","cpy","qt","curveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","bt","w","h","drawRect","r","dr","closePath","cp","clear","_parseColor","color","charAt","parseInt","colors","replace","split","Number","ef","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","ss","beginStroke","s","drawRoundRect","drawRoundedRect","rr","drawCircle","dc","drawEllipse","de","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","dp","PixiText","Text","PixiTextContainer","text","_text","prototypeAccessors$7","createCreatejsTextParams","font","textAlign","lineHeight","lineWidth","createPixiTextData","P$5","CreatejsText","_font","_parseFont","t","fontWeight","fontSize","fontFamily","fill","wordWrap","call","prototypeAccessors$8","_align","p","shift","indexOf","style","align","height","wordWrapWidth","resolvePath","path","basepath","url","resolve","MotionGuidePlugin","install","AnimateEvent","Event","ReachLabelEvent","label","framerate","_framerateBase","endAnimation","reachLabel","advance","delta","totalFrames","labels","position","replaceInstance","name","cls","old","console","warn","mode","startPosition","loop","timeline","reversed","tweens","Array","isArray","state","j","nominalBounds","cache","_CreatejsMovieClip","replaceTexture","_CreatejsBitmap","_CreatejsSprite","AnimateLoaderResource","destroy","Pixim.LoaderResource","AnimateLoader","loadAsync","options","_loadAsync","then","resource","error","Pixim.EVENT_LOADER_ASSET_LOADED","loadAllAsync","targets","keys","Promise","promises","all","src","filepath","_resolveBasepath","_resolveVersion","version","Pixim.utils","_resolveUrl","reject","script","document","createElement","body","appendChild","catch","comp","AdobeAn","getComposition","id","Error","origin","getLibrary","properties","manifest","lib","loader","LoadQueue","installPlugin","Sound","errors","evt","images","getImages","item","result","handleFileLoad","manifests","crossOrigin","loadManifest","getSpriteSheet","queue","ssMetadata","SpriteSheet","getResult","frames","loadAssetAsync","fps","Pixim.LoaderBase","AnimateManifest","AnimateLoader.AnimateLoader","_doneLoaderAsync","Pixim.ManifestBase","registerManifest","_createjsData","task","Task","first","updateTask","taskEnabled","done","min","_addCreatejs","gotoAndPlay","addCreatejs","addCreatejsAt","removeCreatejs","_Container","content","addTargets","Content","defineTargets"],"mappings":"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"}