{"version":3,"file":"Pixim-animate-container.js","sources":["../node_modules/@tawaship/pixi-animate-core/dist/pixi-animate-core.esm.js","../src/MovieClip.ts","../src/Bitmap.ts","../src/Sprite.ts","../src/ContentAnimateManifest.ts","../src/loadJS.ts","../src/core.ts","../src/Container.ts"],"sourcesContent":["/*!\n * @tawaship/pixi-animate-core - v3.0.4-a\n * \n * @require pixi.js v^5.3.2\n * @author tawaship (makazu.mori@gmail.com)\n * @license MIT\n */\n\nimport createjs from '@tawaship/createjs-module';\nexport { default as createjs } from '@tawaship/createjs-module';\nimport { Container, filters, Sprite, BaseTexture, Texture, Graphics, LINE_CAP, LINE_JOIN, Text } from 'pixi.js';\nexport { Point as PixiPoint } from 'pixi.js';\n\nfunction createPixiData(pixi, regObj) {\r\n    return {\r\n        regObj,\r\n        instance: pixi\r\n    };\r\n}\r\nfunction createCreatejsParams() {\r\n    return {\r\n        x: 0,\r\n        y: 0,\r\n        scaleX: 0,\r\n        scaleY: 0,\r\n        regX: 0,\r\n        regY: 0,\r\n        skewX: 0,\r\n        skewY: 0,\r\n        rotation: 0,\r\n        visible: true,\r\n        alpha: 1,\r\n        _off: false,\r\n        mask: null,\r\n        filters: null\r\n    };\r\n}\r\nfunction updateDisplayObjectChildren(cjs, e) {\r\n    const list = cjs.children.slice();\r\n    for (let i = 0, l = list.length; i < l; i++) {\r\n        const child = list[i];\r\n        if (!child.isVisible()) {\r\n            continue;\r\n        }\r\n        //child.draw();\r\n        child.updateForPixi(e);\r\n    }\r\n    return true;\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nclass CreatejsStage extends createjs.Stage {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nclass CreatejsStageGL extends createjs.StageGL {\r\n    updateForPixi(props) {\r\n        if (this.tickOnUpdate) {\r\n            this.tick(props);\r\n        }\r\n        this.dispatchEvent(\"drawstart\");\r\n        updateDisplayObjectChildren(this, props);\r\n        this.dispatchEvent(\"drawend\");\r\n        return true;\r\n    }\r\n}\n\nfunction createObject(proto) {\r\n    return Object.create(proto);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEG_TO_RAD = Math.PI / 180;\n\n/**\r\n * @ignore\r\n */\r\nlet _isDown = false;\r\nclass EventManager {\r\n    constructor(cjs) {\r\n        this._events = {\r\n            pointerdown: [],\r\n            pointerover: [],\r\n            pointerout: [],\r\n            pointermove: [],\r\n            pointerup: [],\r\n            pointerupoutside: []\r\n        };\r\n        this._data = {\r\n            mousedown: {\r\n                types: ['pointerdown'],\r\n                factory: (cb) => {\r\n                    return this._mousedownFactory(cjs, cb);\r\n                }\r\n            },\r\n            rollover: {\r\n                types: ['pointerover'],\r\n                factory: (cb) => {\r\n                    return this._rolloverFactory(cjs, cb);\r\n                }\r\n            },\r\n            rollout: {\r\n                types: ['pointerout'],\r\n                factory: (cb) => {\r\n                    return this._rolloutFactory(cjs, cb);\r\n                }\r\n            },\r\n            pressmove: {\r\n                types: ['pointermove'],\r\n                factory: (cb) => {\r\n                    console.log(cb);\r\n                    return this._pressmoveFactory(cjs, cb);\r\n                }\r\n            },\r\n            pressup: {\r\n                types: ['pointerup', 'pointerupoutside'],\r\n                factory: (cb) => {\r\n                    return this._pressupFactory(cjs, cb);\r\n                }\r\n            }\r\n        };\r\n    }\r\n    add(pixi, type, cb) {\r\n        const data = this._data[type];\r\n        const types = data.types;\r\n        const func = data.factory(cb);\r\n        for (let i = 0; i < types.length; i++) {\r\n            const t = types[i];\r\n            this._events[t].push({ func, origin: cb });\r\n            pixi.on(t, func);\r\n        }\r\n        pixi.interactive = true;\r\n    }\r\n    remove(pixi, type, cb) {\r\n        const data = this._data[type];\r\n        const types = data.types;\r\n        for (let i = 0; i < types.length; i++) {\r\n            const t = types[i];\r\n            const list = this._events[t];\r\n            if (list) {\r\n                for (var j = list.length - 1; j >= 0; j--) {\r\n                    if (list[j].origin === cb) {\r\n                        pixi.off(t, list[j].func);\r\n                        list.splice(j, 1);\r\n                        break;\r\n                    }\r\n                }\r\n                if (list.length === 0) {\r\n                    this._events[t] = [];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _mousedownFactory(cjs, cb) {\r\n        return (e) => {\r\n            e.currentTarget = e.currentTarget.createjs;\r\n            e.target = e.target.createjs;\r\n            const ev = e.data;\r\n            e.rawX = ev.global.x;\r\n            e.rawY = ev.global.y;\r\n            _isDown = true;\r\n            cb(e);\r\n        };\r\n    }\r\n    _rolloverFactory(cjs, cb) {\r\n        return (e) => {\r\n            e.currentTarget = e.currentTarget.createjs;\r\n            e.target = e.currentTarget.createjs;\r\n            const ev = e.data;\r\n            e.rawX = ev.global.x;\r\n            e.rawY = ev.global.y;\r\n            //_isDown = true;\r\n            cb(e);\r\n        };\r\n    }\r\n    _rolloutFactory(cjs, cb) {\r\n        return (e) => {\r\n            e.currentTarget = e.currentTarget.createjs;\r\n            e.target = e.currentTarget.createjs;\r\n            const ev = e.data;\r\n            e.rawX = ev.global.x;\r\n            e.rawY = ev.global.y;\r\n            //_isDown = true;\r\n            cb(e);\r\n        };\r\n    }\r\n    _pressmoveFactory(cjs, cb) {\r\n        return (e) => {\r\n            if (!_isDown) {\r\n                return;\r\n            }\r\n            e.currentTarget = cjs;\r\n            e.target = e.target && e.target.createjs;\r\n            const ev = e.data;\r\n            e.rawX = ev.global.x;\r\n            e.rawY = ev.global.y;\r\n            cb(e);\r\n        };\r\n    }\r\n    _pressupFactory(cjs, cb) {\r\n        return (e) => {\r\n            if (!_isDown) {\r\n                return;\r\n            }\r\n            e.currentTarget = cjs;\r\n            _isDown = false;\r\n            e.target = e.target && e.target.createjs;\r\n            const ev = e.data;\r\n            e.rawX = ev.global.x;\r\n            e.rawY = ev.global.y;\r\n            cb(e);\r\n        };\r\n    }\r\n}\n\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nclass CreatejsButtonHelper extends createjs.ButtonHelper {\r\n    constructor(...args) {\r\n        super(...args);\r\n        const createjs = args[0];\r\n        const pixi = createjs.pixi;\r\n        const baseFrame = args[1];\r\n        const overFrame = args[2];\r\n        const downFrame = args[3];\r\n        const hit = arguments[5];\r\n        const hitFrame = args[6];\r\n        hit.gotoAndStop(hitFrame);\r\n        const hitPixi = pixi.addChild(hit.pixi);\r\n        hitPixi.alpha = 0.00001;\r\n        let isOver = false;\r\n        let isDown = false;\r\n        hitPixi.on('pointerover', function () {\r\n            isOver = true;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(downFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerout', function () {\r\n            isOver = false;\r\n            if (isDown) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerdown', function () {\r\n            isDown = true;\r\n            createjs.gotoAndStop(downFrame);\r\n        });\r\n        hitPixi.on('pointerup', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.on('pointerupoutside', function () {\r\n            isDown = false;\r\n            if (isOver) {\r\n                createjs.gotoAndStop(overFrame);\r\n            }\r\n            else {\r\n                createjs.gotoAndStop(baseFrame);\r\n            }\r\n        });\r\n        hitPixi.interactive = true;\r\n        hitPixi.cursor = 'pointer';\r\n    }\r\n}\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiMovieClip extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._filterContainer = null;\r\n        this._createjs = cjs;\r\n    }\r\n    get filterContainer() {\r\n        return this._filterContainer;\r\n    }\r\n    set filterContainer(value) {\r\n        this._filterContainer = value;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs) {\r\n    const pixi = new PixiMovieClip(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        subInstance: pixi\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.MovieClip;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nclass CreatejsMovieClip extends createjs.MovieClip {\r\n    constructor(...args) {\r\n        super();\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiMovieClipData(this);\r\n        this._createjsParams = createCreatejsMovieClipParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        this._updateState();\r\n        return updateDisplayObjectChildren(this, e);\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    get filters() {\r\n        return this._createjsParams.filters;\r\n    }\r\n    set filters(value) {\r\n        if (value) {\r\n            const list = [];\r\n            for (var i = 0; i < value.length; i++) {\r\n                const f = value[i];\r\n                if (f instanceof createjs.ColorMatrixFilter) {\r\n                    continue;\r\n                }\r\n                const m = new filters.ColorMatrixFilter();\r\n                m.matrix = [\r\n                    f.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n                    0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n                    0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n                    0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n                    0, 0, 0, 0, 1\r\n                ];\r\n                list.push(m);\r\n            }\r\n            var o = this._pixiData.instance;\r\n            var c = o.children;\r\n            var n = new Container();\r\n            var nc = this._pixiData.subInstance = n.addChild(new Container());\r\n            while (c.length) {\r\n                nc.addChild(c[0]);\r\n            }\r\n            o.addChild(n);\r\n            o.filterContainer = nc;\r\n            nc.updateTransform();\r\n            nc.calculateBounds();\r\n            const b = nc.getLocalBounds();\r\n            const x = b.x;\r\n            const y = b.y;\r\n            for (var i = 0; i < nc.children.length; i++) {\r\n                const child = nc.children[i];\r\n                child.x -= x;\r\n                child.y -= y;\r\n                if (child instanceof PixiMovieClip) {\r\n                    const fc = child.filterContainer;\r\n                    if (fc) {\r\n                        fc.cacheAsBitmap = false;\r\n                    }\r\n                }\r\n            }\r\n            n.x = x;\r\n            n.y = y;\r\n            nc.filters = list;\r\n            nc.cacheAsBitmap = true;\r\n        }\r\n        else {\r\n            const o = this._pixiData.instance;\r\n            if (o.filterContainer) {\r\n                const nc = this._pixiData.subInstance;\r\n                const n = nc.parent;\r\n                const c = nc.children;\r\n                o.removeChildren();\r\n                o.filterContainer = null;\r\n                while (c.length) {\r\n                    const v = o.addChild(c[0]);\r\n                    v.x += n.x;\r\n                    v.y += n.y;\r\n                }\r\n                nc.filters = [];\r\n                nc.cacheAsBitmap = false;\r\n                this._pixiData.subInstance = o;\r\n            }\r\n        }\r\n        this._createjsParams.filters = value;\r\n    }\r\n    addChild(child) {\r\n        this._pixiData.subInstance.addChild(child.pixi);\r\n        return super.addChild(child);\r\n    }\r\n    addChildAt(child, index) {\r\n        this._pixiData.subInstance.addChildAt(child.pixi, index);\r\n        return super.addChildAt(child, index);\r\n    }\r\n    removeChild(child) {\r\n        this._pixiData.subInstance.removeChild(child.pixi);\r\n        return super.removeChild(child);\r\n    }\r\n    removeChildAt(index) {\r\n        this._pixiData.subInstance.removeChildAt(index);\r\n        return super.removeChildAt(index);\r\n    }\r\n    removeAllChldren() {\r\n        this._pixiData.subInstance.removeChildren();\r\n        return super.removeAllChldren();\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsMovieClipParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiMovieClipData(createObject(CreatejsMovieClip.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiSprite extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs) {\r\n    const pixi = new PixiSprite(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$1 = createjs.Sprite;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nclass CreatejsSprite extends createjs.Sprite {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$1.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiSpriteData(this);\r\n        this._createjsParams = createCreatejsSpriteParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    gotoAndStop(...args) {\r\n        super.gotoAndStop(...args);\r\n        const frame = this.spriteSheet.getFrame(this.currentFrame);\r\n        const baseTexture = BaseTexture.from(frame.image);\r\n        const texture = new Texture(baseTexture, frame.rect);\r\n        this._pixiData.instance.texture = texture;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsSpriteParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiSpriteData(createObject(CreatejsSprite.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiShape extends Container {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        graphics\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs) {\r\n    const pixi = new PixiShape(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        masked: []\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$2 = createjs.Shape;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nclass CreatejsShape extends createjs.Shape {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$2.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiShapeData(this);\r\n        this._createjsParams = createCreatejsShapeParams(null);\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    get graphics() {\r\n        return this._createjsParams.graphics;\r\n    }\r\n    set graphics(value) {\r\n        if (this._pixiData.masked.length) {\r\n            this._pixiData.instance.removeChildren();\r\n            if (value) {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = this._pixiData.instance;\r\n                }\r\n            }\r\n            else {\r\n                for (let i = 0; i < this._pixiData.masked.length; i++) {\r\n                    this._pixiData.masked[i].mask = null;\r\n                }\r\n            }\r\n        }\r\n        if (value) {\r\n            this._pixiData.instance.addChild(value.pixi);\r\n        }\r\n        this._createjsParams.graphics = value;\r\n    }\r\n    get masked() {\r\n        return this._pixiData.masked;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsShapeParams(null),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiShapeData(createObject(CreatejsShape.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nclass PixiBitmap extends Sprite {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs) {\r\n    const pixi = new PixiBitmap(cjs);\r\n    return createPixiData(pixi, pixi.anchor);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$3 = createjs.Bitmap;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nclass CreatejsBitmap extends createjs.Bitmap {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$3.apply(this, args);\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiBitmapData(this);\r\n        this._createjsParams = createCreatejsBitmapParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        const res = super.initialize(...args);\r\n        const texture = Texture.from(this.image);\r\n        this._pixiData.instance.texture = texture;\r\n        return res;\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsBitmapParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiBitmapData(createObject(CreatejsBitmap.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nclass PixiGraphics extends Graphics {\r\n    constructor(cjs) {\r\n        super();\r\n        this._createjs = cjs;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams() {\r\n    return createCreatejsParams();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs) {\r\n    const pixi = new PixiGraphics(cjs);\r\n    return Object.assign(createPixiData(pixi, pixi.pivot), {\r\n        strokeFill: 0,\r\n        strokeAlpha: 1\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n    0: LINE_CAP.BUTT,\r\n    1: LINE_CAP.ROUND,\r\n    2: LINE_CAP.SQUARE\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n    0: LINE_JOIN.MITER,\r\n    1: LINE_JOIN.ROUND,\r\n    2: LINE_JOIN.BEVEL\r\n};\r\n/**\r\n * @ignore\r\n */\r\nconst P$4 = createjs.Graphics;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nclass CreatejsGraphics extends createjs.Graphics {\r\n    constructor(...args) {\r\n        super(...args);\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$4.apply(this, args);\r\n        this._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n        this._pixiData.strokeFill = 0;\r\n        this._pixiData.strokeAlpha = 1;\r\n    }\r\n    initialize(...args) {\r\n        this._pixiData = createPixiGraphicsData(this);\r\n        this._createjsParams = createCreatejsGraphicsParams();\r\n        this._createjsEventManager = new EventManager(this);\r\n        return super.initialize(...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    // path methods\r\n    moveTo(x, y) {\r\n        if (this._pixiData.instance.clone().endFill().containsPoint({ x: x, y: y })) {\r\n            this._pixiData.instance.beginHole();\r\n        }\r\n        else {\r\n            this._pixiData.instance.endHole();\r\n        }\r\n        this._pixiData.instance.moveTo(x, y);\r\n        return super.moveTo(x, y);\r\n    }\r\n    mt(x, y) {\r\n        return this.moveTo(x, y);\r\n    }\r\n    lineTo(x, y) {\r\n        this._pixiData.instance.lineTo(x, y);\r\n        return super.lineTo(x, y);\r\n    }\r\n    lt(x, y) {\r\n        return this.lineTo(x, y);\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n        return super.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    at(x1, y1, x2, y2, radius) {\r\n        return this.arcTo(x1, y1, x2, y2, radius);\r\n    }\r\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        this._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n        return super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    a(x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        return this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    }\r\n    quadraticCurveTo(cpx, cpy, x, y) {\r\n        this._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n        return super.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    qt(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    curveTo(cpx, cpy, x, y) {\r\n        return this.quadraticCurveTo(cpx, cpy, x, y);\r\n    }\r\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        this._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n        return super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    bt(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        return this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n    rect(x, y, w, h) {\r\n        this._pixiData.instance.drawRect(x, y, w, h);\r\n        return super.rect(x, y, w, h);\r\n    }\r\n    r(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    drawRect(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    dr(x, y, w, h) {\r\n        return this.rect(x, y, w, h);\r\n    }\r\n    closePath() {\r\n        this._pixiData.instance.closePath();\r\n        return super.closePath();\r\n    }\r\n    cp() {\r\n        return this.closePath();\r\n    }\r\n    clear() {\r\n        this._pixiData.instance.clear();\r\n        return super.clear();\r\n    }\r\n    c() {\r\n        return this.clear();\r\n    }\r\n    _parseColor(color) {\r\n        const res = {\r\n            color: 0,\r\n            alpha: 1\r\n        };\r\n        if (!color) {\r\n            res.alpha = 0;\r\n            return res;\r\n        }\r\n        if (color.charAt(0) === '#') {\r\n            res.color = parseInt(color.slice(1), 16);\r\n            return res;\r\n        }\r\n        const colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n        res.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n        res.alpha = Number(colors[3]);\r\n        return res;\r\n    }\r\n    beginFill(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.instance.beginFill(c.color, c.alpha);\r\n        return super.beginFill(color);\r\n    }\r\n    f(color) {\r\n        return this.beginFill(color);\r\n    }\r\n    endFill() {\r\n        this._pixiData.instance.endFill();\r\n        return super.endFill();\r\n    }\r\n    ef() {\r\n        return this.endFill();\r\n    }\r\n    setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        this._pixiData.instance.lineTextureStyle({\r\n            width: thickness,\r\n            color: this._pixiData.strokeFill,\r\n            alpha: this._pixiData.strokeAlpha,\r\n            cap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n            join: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n            miterLimit\r\n        });\r\n        return super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    ss(thickness, caps, joints, miterLimit, ignoreScale) {\r\n        return this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n    }\r\n    beginStroke(color) {\r\n        const c = this._parseColor(color);\r\n        this._pixiData.strokeFill = c.color;\r\n        this._pixiData.strokeAlpha = c.alpha;\r\n        return super.beginStroke(color);\r\n    }\r\n    s(color) {\r\n        return this.beginStroke(color);\r\n    }\r\n    drawRoundRect(x, y, w, h, radius) {\r\n        this._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n        return super.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    rr(x, y, w, h, radius) {\r\n        return this.drawRoundRect(x, y, w, h, radius);\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pixiData.instance.drawCircle(x, y, radius);\r\n        return super.drawCircle(x, y, radius);\r\n    }\r\n    dc(x, y, radius) {\r\n        return this.drawCircle(x, y, radius);\r\n    }\r\n    drawEllipse(x, y, w, h) {\r\n        this._pixiData.instance.drawEllipse(x, y, w, h);\r\n        return super.drawEllipse(x, y, w, h);\r\n    }\r\n    de(x, y, w, h) {\r\n        return this.drawEllipse(x, y, w, h);\r\n    }\r\n    drawPolyStar(x, y, radius, sides, pointSize, angle) {\r\n        this._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n        return super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n    dp(x, y, radius, sides, pointSize, angle) {\r\n        return this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsGraphicsParams(),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiGraphicsData(createObject(CreatejsGraphics.prototype)),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nclass PixiText extends Text {\r\n}\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nclass PixiTextContainer extends Container {\r\n    constructor(cjs, text) {\r\n        super();\r\n        this._createjs = cjs;\r\n        this._text = text;\r\n    }\r\n    get createjs() {\r\n        return this._createjs;\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN = 'left';\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text, font, color) {\r\n    return Object.assign(createCreatejsParams(), {\r\n        text: text,\r\n        font: font,\r\n        color: color,\r\n        textAlign: DEF_ALIGN,\r\n        lineHeight: 0,\r\n        lineWidth: 0\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs, text) {\r\n    const pixi = new PixiTextContainer(cjs, text);\r\n    return createPixiData(pixi, pixi.pivot);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nconst P$5 = createjs.Text;\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nclass CreatejsText extends createjs.Text {\r\n    constructor(text, font, color = '#000000', ...args) {\r\n        super(text, font, color, ...args);\r\n        this._createjsParams = createCreatejsTextParams(text, font, color);\r\n        const _font = this._parseFont(font);\r\n        const t = new PixiText(text, {\r\n            fontWeight: _font.fontWeight,\r\n            fontSize: _font.fontSize,\r\n            fontFamily: _font.fontFamily,\r\n            fill: this._parseColor(color),\r\n            wordWrap: true\r\n        });\r\n        this._pixiData = createPixiTextData(this, t);\r\n        this._pixiData.instance.addChild(t);\r\n        this._createjsEventManager = new EventManager(this);\r\n        P$5.call(this, text, font, color, ...args);\r\n    }\r\n    get pixi() {\r\n        return this._pixiData.instance;\r\n    }\r\n    updateForPixi(e) {\r\n        return true;\r\n    }\r\n    get x() {\r\n        return this._createjsParams.x;\r\n    }\r\n    set x(value) {\r\n        this._pixiData.instance.x = value;\r\n        this._createjsParams.x = value;\r\n    }\r\n    get y() {\r\n        return this._createjsParams.y;\r\n    }\r\n    set y(value) {\r\n        this._pixiData.instance.y = value;\r\n        this._createjsParams.y = value;\r\n    }\r\n    get scaleX() {\r\n        return this._createjsParams.scaleX;\r\n    }\r\n    set scaleX(value) {\r\n        this._pixiData.instance.scale.x = value;\r\n        this._createjsParams.scaleX = value;\r\n    }\r\n    get scaleY() {\r\n        return this._createjsParams.scaleY;\r\n    }\r\n    set scaleY(value) {\r\n        this._pixiData.instance.scale.y = value;\r\n        this._createjsParams.scaleY = value;\r\n    }\r\n    get skewX() {\r\n        return this._createjsParams.skewX;\r\n    }\r\n    set skewX(value) {\r\n        this._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n        this._createjsParams.skewX = value;\r\n    }\r\n    get skewY() {\r\n        return this._createjsParams.skewY;\r\n    }\r\n    set skewY(value) {\r\n        this._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n        this._createjsParams.skewY = value;\r\n    }\r\n    get regX() {\r\n        return this._createjsParams.regX;\r\n    }\r\n    set regX(value) {\r\n        this._pixiData.regObj.x = value;\r\n        this._createjsParams.regX = value;\r\n    }\r\n    get regY() {\r\n        return this._createjsParams.regY;\r\n    }\r\n    set regY(value) {\r\n        this._pixiData.regObj.y = value;\r\n        this._createjsParams.regY = value;\r\n    }\r\n    get rotation() {\r\n        return this._createjsParams.rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n        this._createjsParams.rotation = value;\r\n    }\r\n    get visible() {\r\n        return this._createjsParams.visible;\r\n    }\r\n    set visible(value) {\r\n        value = !!value;\r\n        this._pixiData.instance.visible = value;\r\n        this._createjsParams.visible = value;\r\n    }\r\n    get alpha() {\r\n        return this._createjsParams.alpha;\r\n    }\r\n    set alpha(value) {\r\n        this._pixiData.instance.alpha = value;\r\n        this._createjsParams.alpha = value;\r\n    }\r\n    get _off() {\r\n        return this._createjsParams._off;\r\n    }\r\n    set _off(value) {\r\n        this._pixiData.instance.renderable = !value;\r\n        this._createjsParams._off = value;\r\n    }\r\n    addEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.addEventListener(type, cb, ...args);\r\n    }\r\n    removeEventListener(type, cb, ...args) {\r\n        if (!(cb instanceof CreatejsButtonHelper)) {\r\n            if (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n                this._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n            }\r\n        }\r\n        return super.removeEventListener(type, cb, ...args);\r\n    }\r\n    get mask() {\r\n        return this._createjsParams.mask;\r\n    }\r\n    set mask(value) {\r\n        if (value) {\r\n            value.masked.push(this._pixiData.instance);\r\n            this._pixiData.instance.mask = value.pixi;\r\n            this._pixiData.instance.once('added', () => {\r\n                this._pixiData.instance.parent.addChild(value.pixi);\r\n            });\r\n        }\r\n        else {\r\n            this._pixiData.instance.mask = null;\r\n        }\r\n        this._createjsParams.mask = value;\r\n    }\r\n    get text() {\r\n        return this._createjsParams.text;\r\n    }\r\n    set text(text) {\r\n        this._pixiData.instance.text.text = text;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.text = text;\r\n    }\r\n    _parseFont(font) {\r\n        const p = font.split(' ');\r\n        let w = 'normal';\r\n        let s = p.shift() || '';\r\n        if (s.indexOf('px') === -1) {\r\n            w = s;\r\n            s = p.shift() || '';\r\n        }\r\n        return {\r\n            fontWeight: w,\r\n            fontSize: Number((s || '0px').replace('px', '')),\r\n            fontFamily: p.join(' ').replace(/'/g, '') //'\r\n        };\r\n    }\r\n    get font() {\r\n        return this._createjsParams.font;\r\n    }\r\n    set font(font) {\r\n        const _font = this._parseFont(font);\r\n        this._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n        this._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n        this._createjsParams.font = font;\r\n    }\r\n    _parseColor(color) {\r\n        return parseInt(color.slice(1), 16);\r\n    }\r\n    get color() {\r\n        return this._createjsParams.color;\r\n    }\r\n    set color(color) {\r\n        this._pixiData.instance.text.style.fill = this._parseColor(color);\r\n        this._createjsParams.color = color;\r\n    }\r\n    _align(align) {\r\n        if (align === 'left') {\r\n            this._pixiData.instance.text.x = 0;\r\n            return;\r\n        }\r\n        if (align === 'center') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n            return;\r\n        }\r\n        if (align === 'right') {\r\n            this._pixiData.instance.text.x = -this._pixiData.instance.text.width;\r\n            return;\r\n        }\r\n    }\r\n    get textAlign() {\r\n        return this._createjsParams.textAlign;\r\n    }\r\n    set textAlign(align) {\r\n        this._pixiData.instance.text.style.align = align;\r\n        this._align(align);\r\n        this._createjsParams.textAlign = align;\r\n    }\r\n    get lineHeight() {\r\n        return this._createjsParams.lineHeight;\r\n    }\r\n    set lineHeight(height) {\r\n        this._pixiData.instance.text.style.lineHeight = height;\r\n        this._createjsParams.lineHeight = height;\r\n    }\r\n    get lineWidth() {\r\n        return this._createjsParams.lineWidth;\r\n    }\r\n    set lineWidth(width) {\r\n        this._pixiData.instance.text.style.wordWrapWidth = width;\r\n        this._align(this.textAlign);\r\n        this._createjsParams.lineWidth = width;\r\n    }\r\n}\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n    _createjsParams: {\r\n        value: createCreatejsTextParams('', '', ''),\r\n        writable: true\r\n    },\r\n    _pixiData: {\r\n        value: createPixiTextData(createObject(CreatejsText.prototype), new PixiText('')),\r\n        writable: true\r\n    }\r\n});\n\n/**\r\n * Load assets of createjs content published with Adobe Animate.\r\n *\r\n * @param comp Composition obtained from `AdobeAn.getComposition`.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nfunction loadAssetAsync(comp, basepath, options = {}) {\r\n    if (!comp) {\r\n        throw new Error('no composition');\r\n    }\r\n    const lib = comp.getLibrary();\r\n    return new Promise((resolve, reject) => {\r\n        if (lib.properties.manifest.length === 0) {\r\n            resolve({});\r\n        }\r\n        if (basepath) {\r\n            basepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n        }\r\n        const loader = new createjs.LoadQueue(false, basepath);\r\n        loader.installPlugin(createjs.Sound);\r\n        const errors = [];\r\n        loader.addEventListener('fileload', (evt) => {\r\n            handleFileLoad(evt, comp);\r\n        });\r\n        loader.addEventListener('complete', (evt) => {\r\n            if (errors.length) {\r\n                reject(errors);\r\n                return;\r\n            }\r\n            resolve(evt);\r\n        });\r\n        loader.addEventListener('error', (evt) => {\r\n            errors.push(evt.data);\r\n        });\r\n        if (options.crossOrigin) {\r\n            const m = lib.properties.manifest;\r\n            for (let i = 0; i < m.length; i++) {\r\n                m[i].crossOrigin = true;\r\n            }\r\n        }\r\n        loader.loadManifest(lib.properties.manifest);\r\n    })\r\n        .then((evt) => {\r\n        const ss = comp.getSpriteSheet();\r\n        const queue = evt.target;\r\n        const ssMetadata = lib.ssMetadata;\r\n        for (let i = 0; i < ssMetadata.length; i++) {\r\n            ss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n                images: [\r\n                    queue.getResult(ssMetadata[i].name)\r\n                ],\r\n                frames: ssMetadata[i].frames\r\n            });\r\n        }\r\n        return lib;\r\n    });\r\n}\r\n// overrides\r\ncreatejs.Stage = CreatejsStage;\r\ncreatejs.StageGL = CreatejsStageGL;\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Sprite = CreatejsSprite;\r\ncreatejs.Shape = CreatejsShape;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Graphics = CreatejsGraphics;\r\ncreatejs.Text = CreatejsText;\r\ncreatejs.ButtonHelper = CreatejsButtonHelper;\r\n// install plugins\r\ncreatejs.MotionGuidePlugin.install();\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt, comp) {\r\n    const images = comp.getImages();\r\n    if (evt && (evt.item.type == 'image')) {\r\n        images[evt.item.id] = evt.result;\r\n    }\r\n}\n\nexport { CreatejsBitmap, CreatejsButtonHelper, CreatejsGraphics, CreatejsMovieClip, CreatejsShape, CreatejsSprite, CreatejsStage, CreatejsStageGL, CreatejsText, PixiBitmap, PixiGraphics, PixiMovieClip, PixiShape, PixiSprite, PixiText, PixiTextContainer, createCreatejsParams, createPixiData, loadAssetAsync, updateDisplayObjectChildren };\n//# sourceMappingURL=pixi-animate-core.esm.js.map\n","import { createjs, CreatejsMovieClip as _CreatejsMovieClip, ITickerData, TCreatejsObject } from '@tawaship/pixi-animate-core';\r\n\r\nexport { ITickerData } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P: number = 1000 / 60;\r\n\r\nexport class AnimateEvent extends createjs.Event {\r\n\tconstructor(type: string) {\r\n\t\tsuper(type);\r\n\t}\r\n};\r\n\r\nexport interface IReachLabelData {\r\n\t/**\r\n\t * Label name.\r\n\t */\r\n\tlabel: string;\r\n\t\r\n\t/**\r\n\t * Frame number of label.\r\n\t */\r\n\tposition: number;\r\n}\r\n\r\nexport class ReachLabelEvent extends AnimateEvent {\r\n\tdata: IReachLabelData;\r\n\t\r\n\tconstructor(type: string, label: IReachLabelData) {\r\n\t\tsuper(type);\r\n\t\t\r\n\t\tthis.data = label;\r\n\t}\r\n}\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjsmovieclip.html | CreatejsMovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends _CreatejsMovieClip {\r\n\tdeclare _framerateBase: number;\r\n\t\r\n\t/**\r\n\t * When the last frame of the timeline is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\tendAnimation?(e: AnimateEvent): void {}\r\n\t\r\n\t/**\r\n\t * When either labels is reached.\r\n\t * \r\n\t * @event\r\n\t */\r\n\treachLabel?(e: ReachLabelEvent): void {}\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tsuper.initialize(...args);\r\n\t\t\r\n\t\tthis.framerate = this._framerateBase;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @override\r\n\t */\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\tconst currentFrame = this.currentFrame;\r\n\t\t\r\n\t\t// this.advance(e.delta * P);\r\n\t\tthis.advance(P);\r\n\t\t\r\n\t\tif (currentFrame !== this.currentFrame) {\r\n\t\t\tif (this.currentFrame === (this.totalFrames - 1)) {\r\n\t\t\t\tthis.dispatchEvent(new AnimateEvent('endAnimation'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < this.labels.length; i++) {\r\n\t\t\t\tconst label = this.labels[i];\r\n\t\t\t\tif (this.currentFrame === label.position) {\r\n\t\t\t\t\tthis.dispatchEvent(new ReachLabelEvent('reachLabel', label));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.updateForPixi(e);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Replace child instance\r\n\t * \r\n\t * @param name Name of old instancee.\r\n\t * @param cls Class of new instance.\r\n\t */\r\n\treplaceInstance(name: string, cls: typeof CreatejsMovieClip) {\r\n\t\tconst old = this[name];\r\n\t\t\r\n\t\tif (!old) {\r\n\t\t\tconsole.warn(`instance '${name}' was not found.`);\r\n\t\t}\r\n\t\t\r\n\t\tconst props = ['x', 'y', 'scaleX', 'scaleY', 'rotation', 'skewX', 'skewY', 'regX', 'regY', '_off', 'alpha'];\r\n\t\t\r\n\t\tconst instance = this[name] = new cls(old.mode, old.startPosition, old.loop, old.timeline.reversed);\r\n\t\t\r\n\t\tconst tweens = this.timeline.tweens;\r\n\t\tfor (let i = 0; i < tweens.length; i++) {\r\n\t\t\tconst target = tweens[i].target;\r\n\t\t\t\r\n\t\t\tif (Array.isArray(target.state)) {\r\n\t\t\t\tfor (let j = 0; j < target.state.length; j++) {\r\n\t\t\t\t\tconsole.log(target)\r\n\t\t\t\t\tif (target.state[j].t === old) {\r\n\t\t\t\t\t\ttarget.state[j].t = instance;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (target === old) {\r\n\t\t\t\ttweens[i].target = instance;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor (let i = 0; i < props.length; i++) {\r\n\t\t\tinstance[props[i]] = old[props[i]];\r\n\t\t}\r\n\t\t\r\n\t\tif (old.mask) {\r\n\t\t\tinstance.mask = old.mask;\r\n\t\t\told.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (old.filters) {\r\n\t\t\tinstance.filters = old.filters;\r\n\t\t\told.filters = null;\r\n\t\t\t\r\n\t\t\tconst nominalBounds = instance.nominalBounds;\r\n\t\t\tinstance.cache(nominalBounds.x - 2, nominalBounds.y - 2, nominalBounds.width + 4, nominalBounds.height + 4);\r\n\t\t}\r\n\t\t\r\n\t\tthis.removeChild(old);\r\n\t\t\r\n\t\treturn instance;\r\n\t}\r\n}\r\n\r\ndelete(CreatejsMovieClip.prototype.endAnimation);\r\ndelete(CreatejsMovieClip.prototype.reachLabel);","import { Texture } from 'pixi.js';\r\nimport { CreatejsBitmap as _CreatejsBitmap } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjsbitmap.html | CreatejsBitmap]]\r\n */\r\nexport class CreatejsBitmap extends _CreatejsBitmap {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import { Texture } from 'pixi.js';\r\nimport { CreatejsSprite as _CreatejsSprite } from '@tawaship/pixi-animate-core';\r\n\r\n/**\r\n * \\@tawaship/pixi-animate-core [[https://tawaship.github.io/pixi-animate-core/classes/createjssprite.html | CreatejsSprite]]\r\n */\r\nexport class CreatejsSprite extends _CreatejsSprite {\r\n\t/**\r\n\t * Replace texture.\r\n\t * \r\n\t * @param texture Texture to replace.\r\n\t */\r\n\treplaceTexture(texture: Texture) {\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}","import { ContentManifestBase, ILoadedResourceDictionary, IResourceDictionary } from '@tawaship/pixim.js';\r\nimport { loadAssetAsync as _loadAssetAsync, ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-core';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\nimport loadJS from './loadJS';\r\n\r\n/**\r\n * @ignore\r\n */\r\ndeclare const AdobeAn: any;\r\n\r\nexport interface IPrepareTarget {\r\n\t/**\r\n\t * \"lib.properties.id\" in Animate content.\r\n\t */\r\n\tid: string;\r\n\t\r\n\t/**\r\n\t * Directory path of Animate content.\r\n\t */\r\n\tbasepath: string;\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/interfaces/iloadassetoption.html | PixiAnimateCore.ILoadAssetOption]]\r\n\t */\r\n\toptions?: ILoadAssetOption;\r\n};\r\n\r\n/**\r\n * Load the assets of createjs content published by Adobe Animate.\r\n * If you use multiple contents, each composition ID must be unique.\r\n * Please run \"Pixim.animate.init\" before running.\r\n */\r\nexport function loadAssetAsync(targets: IPrepareTarget | IPrepareTarget[]) {\r\n\tif (!Array.isArray(targets)) {\r\n\t\ttargets = [targets];\r\n\t}\r\n\t\r\n\tconst promises: Promise<IAnimateLibrary>[] = [];\r\n\t\r\n\tfor (let i = 0; i < targets.length; i++) {\r\n\t\tconst target = targets[i];\r\n\t\t\r\n\t\tconst comp = AdobeAn.getComposition(target.id);\r\n\t\tif (!comp) {\r\n\t\t\tthrow new Error(`no composition: ${target.id}`);\r\n\t\t}\r\n\t\t\r\n\t\tpromises.push(_loadAssetAsync(comp, target.basepath, target.options)\r\n\t\t\t.then((lib: IAnimateLibrary) => {\r\n\t\t\t\tfor (let i  in lib) {\r\n\t\t\t\t\tif (lib[i].prototype instanceof CreatejsMovieClip) {\r\n\t\t\t\t\t\tlib[i].prototype._framerateBase = lib.properties.fps;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn lib;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn Promise.all(promises)\r\n\t\t.then((resolvers: IAnimateLibrary[]) => {\r\n\t\t\tif (resolvers.length === 1) {\r\n\t\t\t\treturn resolvers[0];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn resolvers;\r\n\t\t});\r\n}\r\n\r\nexport interface ILoadedAnimateResourceDictionary extends ILoadedResourceDictionary<IAnimateLibrary> {\r\n}\r\n\r\nexport interface IContentAnimateManifestData extends IPrepareTarget {\r\n\t/**\r\n\t * Javascript file path of Animate content.\r\n\t */\r\n\tfilepath: string;\r\n}\r\n\r\nexport class ContentAnimateManifest extends ContentManifestBase<IContentAnimateManifestData, IAnimateLibrary> {\r\n\t/**\r\n\t * Load image resources.\r\n\t * \r\n\t * @override\r\n\t */\r\n\tprotected _loadAsync(basepath: string, version: string, useCache: boolean): Promise<ILoadedAnimateResourceDictionary> {\r\n\t\tconst manifests = this._manifests;\r\n\t\t\r\n\t\tconst promises: Promise<void>[] = [];\r\n\t\t\r\n\t\tfor (let i in manifests) {\r\n\t\t\tconst manifest = manifests[i];\r\n\t\t\tconst contentPath = (manifest.data.basepath === '.' || manifest.data.basepath === './') ? '' : manifest.data.basepath.replace(/([^/])$/, '$1/');\r\n\t\t\tconst dirpath = this._resolvePath(contentPath, basepath);\r\n\t\t\tconst filepath = this._resolvePath(manifest.data.filepath, dirpath);\r\n\t\t\tconst url =\r\n\t\t\t\tversion\r\n\t\t\t\t?`${filepath}${filepath.match(/\\?/) ? '&' : '?'}_fv=${version}`\r\n\t\t\t\t: filepath;\r\n\t\t\t\r\n\t\t\tpromises.push(\r\n\t\t\t\tloadJS(url)\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tthrow `Animate: '${i}' cannot load.`;\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\tconst keys: string[] = [];\r\n\t\tconst res: ILoadedAnimateResourceDictionary = {};\r\n\t\treturn Promise.all(promises)\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst targets: IPrepareTarget[] = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (let i in manifests) {\r\n\t\t\t\t\tconst manifest = manifests[i];\r\n\t\t\t\t\tkeys.push(i);\r\n\t\t\t\t\t\r\n\t\t\t\t\ttargets.push({\r\n\t\t\t\t\t\tid: manifest.data.id,\r\n\t\t\t\t\t\tbasepath: this._resolvePath(manifest.data.basepath, basepath),\r\n\t\t\t\t\t\toptions: manifest.data.options\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn loadAssetAsync(targets);\r\n\t\t\t})\r\n\t\t\t.then(libs => {\r\n\t\t\t\tif (!Array.isArray(libs)) {\r\n\t\t\t\t\tlibs = [ libs ];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < libs.length; i++) {\r\n\t\t\t\t\tres[keys[i]] = {\r\n\t\t\t\t\t\tresource: libs[i],\r\n\t\t\t\t\t\terror: false\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Destroy resources.\r\n\t * \r\n\t * @override\r\n\t */\r\n\tdestroyResources(resources: IResourceDictionary<IAnimateLibrary>) {\r\n\t\t\r\n\t}\r\n}","export default function loadJS(src: string): Promise<void> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst script = document.createElement('script');\r\n\t\tscript.src = src;\r\n\t\tscript.addEventListener('load', () => {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\tresolve();\r\n\t\t});\r\n\t\tscript.addEventListener('error', (e: any) => {\r\n\t\t\tdocument.body.removeChild(script);\r\n\t\t\treject(e);\r\n\t\t});\r\n\t\tdocument.body.appendChild(script);\r\n\t});\r\n}","import { Content as PiximContent, IManifestDictionary } from '@tawaship/pixim.js';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\nimport { CreatejsBitmap } from './Bitmap';\r\nimport { CreatejsSprite } from './Sprite';\r\nimport { ContentAnimateManifest, IContentAnimateManifestData } from './ContentAnimateManifest';\r\nimport { createjs } from '@tawaship/pixi-animate-core';\r\nexport { createjs, ILoadAssetOption, IAnimateLibrary } from '@tawaship/pixi-animate-core';\r\n\r\nPiximContent.registerManifest('animates', ContentAnimateManifest);\r\n\r\n/**\r\n * Define animate assets for class.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] class.\r\n * @param data see also [[https://tawaship.github.io/Pixim.js/interfaces/imanifestdictionary.html | Pixim.IManifestDictionary]].\r\n */\r\nexport function defineAnimatesTo(Content: typeof PiximContent, data: IManifestDictionary<IContentAnimateManifestData>) {\r\n\tContent.defineManifests('animates', data, {});\r\n}\r\n\r\n/**\r\n * Define animate assets for instance.\r\n * \r\n * @param PiximContent Target [[https://tawaship.github.io/Pixim.js/classes/content.html | Pixim.Content]] instance.\r\n * @param data see also [[https://tawaship.github.io/Pixim.js/interfaces/imanifestdictionary.html | Pixim.IManifestDictionary]].\r\n */\r\nexport function addAnimatesTo(content: PiximContent, data: IManifestDictionary<IContentAnimateManifestData>) {\r\n\tcontent.addManifests('animates', data, {});\r\n}\r\n\r\n// overrides\r\ncreatejs.MovieClip = CreatejsMovieClip;\r\ncreatejs.Bitmap = CreatejsBitmap;\r\ncreatejs.Sprite = CreatejsSprite;","import { Container as _Container, Task, ITickerData } from '@tawaship/pixim.js';\r\nimport { TCreatejsObject } from '@tawaship/pixi-animate-core';\r\nimport { CreatejsMovieClip } from './MovieClip';\r\n\r\nexport interface ICreatejsMovieClipDictionary {\r\n\t[id: number]: CreatejsMovieClip;\r\n}\r\n\r\nexport interface ICreatejsData {\r\n\tid: number;\r\n\ttargets: ICreatejsMovieClipDictionary;\r\n\ttask: Task;\r\n}\r\n\r\n/**\r\n * [[https://tawaship.github.io/Pixim.js/classes/container.html | Pixim.Container]]\r\n */\r\nexport class Container extends _Container {\r\n\tprivate _createjsData: ICreatejsData;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._createjsData = {\r\n\t\t\tid: 0,\r\n\t\t\ttargets: {},\r\n\t\t\ttask: new Task([], this)\r\n\t\t};\r\n\t\t\r\n\t\tconst targets = this._createjsData.targets;\r\n\t\t\r\n\t\tthis._createjsData.task.add((e: ITickerData) => {\r\n\t\t\tfor (let i in targets) {\r\n\t\t\t\ttargets[i].updateForPixi(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis._createjsData.task.first();\r\n\t}\r\n\t\r\n\t/**\r\n\t * @override\r\n\t */\r\n\tupdateTask(e: ITickerData) {\r\n\t\tsuper.updateTask(e);\r\n\t\t\r\n\t\tconst task = this._createjsData.task;\r\n\t\t\r\n\t\tif (!this.taskEnabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\ttask.done(e);\r\n\t}\r\n\t\r\n\tprivate _addCreatejs(cjs: TCreatejsObject) {\r\n\t\tif (cjs instanceof CreatejsMovieClip) {\r\n\t\t\tconst p = cjs.pixi.parent;\r\n\t\t\t\r\n\t\t\tcjs.pixi.once('added', () => {\r\n\t\t\t\tif (cjs.pixi.parent !== p) {\r\n\t\t\t\t\tcjs.gotoAndPlay(0);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst id = this._createjsData.id++;\r\n\t\t\t\tthis._createjsData.targets[id] = cjs;\r\n\t\t\t\t\r\n\t\t\t\tcjs.pixi.once('removed', () => {\r\n\t\t\t\t\tdelete(this._createjsData.targets[id]);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\taddCreatejsAt(cjs: TCreatejsObject, index: number) {\r\n\t\tthis._addCreatejs(cjs);\r\n\t\tthis.addChildAt(cjs.pixi, index);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * [[https://tawaship.github.io/pixi-animate-core/modules.html#tcreatejsobject | TCreatejsObject]]\r\n\t */\r\n\tremoveCreatejs(cjs: TCreatejsObject) {\r\n\t\tthis.removeChild(cjs.pixi);\r\n\t\t\r\n\t\treturn cjs;\r\n\t}\r\n}"],"names":["createPixiData","pixi","regObj","instance","updateDisplayObjectChildren","cjs","e","const","list","children","slice","i","l","length","child","isVisible","updateForPixi","CreatejsStage","props","this","tickOnUpdate","tick","dispatchEvent","Stage","CreatejsStageGL","createjs","StageGL","createObject","proto","Object","create","DEG_TO_RAD","Math","PI","_isDown","EventManager","_events","pointerdown","pointerover","pointerout","pointermove","pointerup","pointerupoutside","_data","mousedown","types","factory","cb","_mousedownFactory","rollover","_rolloverFactory","rollout","_rolloutFactory","pressmove","console","log","_pressmoveFactory","pressup","_pressupFactory","add","type","data","func","t","push","origin","on","interactive","remove","j","off","splice","currentTarget","target","ev","rawX","global","x","rawY","y","CreatejsButtonHelper","super","args","baseFrame","overFrame","downFrame","hit","arguments","hitFrame","gotoAndStop","hitPixi","addChild","alpha","let","isOver","isDown","cursor","ButtonHelper","PixiMovieClip","_filterContainer","_createjs","prototypeAccessors","filterContainer","value","Container","createPixiMovieClipData","assign","pivot","subInstance","P","MovieClip","CreatejsMovieClip","_pixiData","_createjsParams","scaleX","scaleY","regX","regY","skewX","skewY","rotation","visible","_off","mask","filters","_createjsEventManager","apply","initialize","prototypeAccessors$1","_updateState","scale","skew","renderable","addEventListener","removeEventListener","masked","once","parent","f","ColorMatrixFilter","m","matrix","redMultiplier","redOffset","greenMultiplier","greenOffset","blueMultiplier","blueOffset","alphaMultiplier","alphaOffset","o","c","n","nc","updateTransform","calculateBounds","b","getLocalBounds","fc","cacheAsBitmap","removeChildren","v","addChildAt","index","removeChild","removeChildAt","removeAllChldren","defineProperties","prototype","writable","PixiSprite","prototypeAccessors$2","Sprite","createPixiSpriteData","anchor","P$1","CreatejsSprite","prototypeAccessors$3","frame","spriteSheet","getFrame","currentFrame","baseTexture","BaseTexture","from","image","texture","Texture","rect","PixiShape","prototypeAccessors$4","createCreatejsShapeParams","graphics","createPixiShapeData","P$2","Shape","CreatejsShape","prototypeAccessors$5","PixiBitmap","prototypeAccessors$6","createPixiBitmapData","P$3","Bitmap","CreatejsBitmap","res","prototypeAccessors$7","PixiGraphics","prototypeAccessors$8","Graphics","createPixiGraphicsData","strokeFill","strokeAlpha","LineCap","LINE_CAP","BUTT","ROUND","SQUARE","LineJoin","LINE_JOIN","MITER","BEVEL","P$4","CreatejsGraphics","beginFill","prototypeAccessors$9","moveTo","clone","endFill","containsPoint","beginHole","endHole","mt","lineTo","lt","arcTo","x1","y1","x2","y2","radius","at","arc","startAngle","endAngle","anticlockwise","a","quadraticCurveTo","cpx","cpy","qt","curveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","bt","w","h","drawRect","r","dr","closePath","cp","clear","_parseColor","color","charAt","parseInt","colors","replace","split","Number","ef","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","lineTextureStyle","width","cap","join","ss","beginStroke","s","drawRoundRect","drawRoundedRect","rr","drawCircle","dc","drawEllipse","de","drawPolyStar","sides","pointSize","angle","drawRegularPolygon","dp","PixiText","Text","PixiTextContainer","text","_text","prototypeAccessors$10","createCreatejsTextParams","font","textAlign","lineHeight","lineWidth","createPixiTextData","P$5","CreatejsText","_font","_parseFont","fontWeight","fontSize","fontFamily","fill","wordWrap","call","prototypeAccessors$11","_align","p","shift","indexOf","style","align","height","wordWrapWidth","loadAssetAsync","comp","basepath","options","Error","lib","getLibrary","Promise","resolve","reject","properties","manifest","loader","LoadQueue","installPlugin","Sound","errors","evt","images","getImages","item","id","result","handleFileLoad","crossOrigin","loadManifest","then","getSpriteSheet","queue","ssMetadata","name","SpriteSheet","getResult","frames","MotionGuidePlugin","install","AnimateEvent","Event","ReachLabelEvent","label","framerate","_framerateBase","endAnimation","reachLabel","advance","totalFrames","labels","position","replaceInstance","cls","old","warn","mode","startPosition","loop","timeline","reversed","tweens","Array","isArray","state","nominalBounds","cache","_CreatejsMovieClip","replaceTexture","_CreatejsBitmap","_CreatejsSprite","targets","promises","AdobeAn","getComposition","_loadAssetAsync","fps","all","resolvers","ContentAnimateManifest","_loadAsync","version","useCache","manifests","_manifests","src","contentPath","dirpath","_resolvePath","filepath","url","match","script","document","createElement","body","appendChild","catch","keys","libs","resource","error","destroyResources","resources","ContentManifestBase","registerManifest","_createjsData","task","Task","first","updateTask","taskEnabled","done","_addCreatejs","gotoAndPlay","addCreatejs","addCreatejsAt","removeCreatejs","_Container","content","addManifests","Content","defineManifests"],"mappings":"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"}